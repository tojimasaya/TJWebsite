<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-806426BQX2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-806426BQX2');
    </script>
    
    <title>ãƒˆãƒ«ã‚³æ—…è¡Œè¨˜ - ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã‹ã‚‰ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«ã¸</title>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Mincho ProN', 'Yu Mincho', 'YuMincho', 'HGæ˜æœE', 'MS Pæ˜æœ', 'MS æ˜æœ', serif;
            line-height: 1.9;
            color: #333;
            background: #fafafa;
        }

        /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .hero {
            height: 70vh;
            min-height: 500px;
            position: relative;
            overflow: hidden;
        }

        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            padding: 2rem;
            width: 100%;
        }

        .hero-label {
            font-size: 0.85rem;
            letter-spacing: 0.3em;
            margin-bottom: 1.5rem;
            font-weight: 400;
            opacity: 0.95;
        }

        .hero-title {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 400;
            letter-spacing: 0.15em;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .hero-subtitle {
            font-size: clamp(0.95rem, 1.5vw, 1.1rem);
            font-weight: 300;
            letter-spacing: 0.15em;
            line-height: 1.9;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* ã‚¤ãƒ³ãƒˆãƒ­ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .intro {
            max-width: 900px;
            margin: 0 auto;
            padding: 5rem 2rem 3rem;
            text-align: center;
        }

        .intro-text {
            font-size: 1rem;
            line-height: 2.2;
            color: #555;
        }

        /* ãƒãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .map-section {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1.5rem 3rem;
        }

        .map-title {
            font-size: 0.9rem;
            letter-spacing: 0.18em;
            color: #666;
            margin: 0 0 1rem 0.2rem;
        }

        .map-controls {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .map-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 0.6rem 1.5rem;
            margin: 0 0.5rem;
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 0.05em;
        }

        .map-btn:hover {
            background: #f5f5f5;
        }

        .map-btn.active {
            background: #c49a6c;
            color: white;
            border-color: #c49a6c;
        }

        #map {
            width: 100%;
            height: 520px;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
            background: #f3f3f3;
        }

        .marker-badge {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #c49a6c;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .marker-badge:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 16px rgba(196, 154, 108, 0.6);
        }

        /* å¼·åŒ–ç‰ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¹ã‚¿ã‚¤ãƒ« */
        .mapboxgl-popup-content {
            padding: 0;
            border-radius: 8px;
            overflow: hidden;
            min-width: 280px;
            max-width: 320px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .mapboxgl-popup-close-button {
            font-size: 22px;
            padding: 8px;
            color: white;
            background: rgba(0,0,0,0.3);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            top: 8px;
            right: 8px;
            transition: all 0.3s;
        }

        .mapboxgl-popup-close-button:hover {
            background: rgba(0,0,0,0.5);
        }

        .popup-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            display: block;
        }

        .popup-info {
            padding: 1.2rem;
            background: white;
        }

        .popup-title {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 0.3rem;
            letter-spacing: 0.05em;
            color: #2c2c2c;
        }

        .popup-subtitle {
            font-size: 0.85rem;
            color: #999;
            margin-bottom: 0.8rem;
        }

        .popup-date {
            font-size: 0.75rem;
            color: #666;
            margin-bottom: 1rem;
            padding: 0.4rem 0.7rem;
            background: #f9f7f4;
            border-radius: 4px;
            display: inline-block;
            border-left: 3px solid #c49a6c;
        }

        .popup-description {
            font-size: 0.85rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 1.2rem;
        }

        .popup-link {
            display: block;
            padding: 0.7rem 1.5rem;
            background: #2c2c2c;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
            letter-spacing: 0.1em;
            border-radius: 4px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .popup-link:hover {
            background: #c49a6c;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(196, 154, 108, 0.4);
        }

        /* éƒ½å¸‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .cities-section {
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 2rem 5rem;
        }

        .city-item {
            display: flex;
            align-items: center;
            gap: 4rem;
            margin-bottom: 6rem;
            background: white;
            padding: 0;
        }

        .city-item:nth-child(even) {
            flex-direction: row-reverse;
        }

        .city-image-container {
            flex: 0 0 45%;
            position: relative;
            overflow: hidden;
        }

        .city-image {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.6s ease;
        }

        .city-item:hover .city-image {
            transform: scale(1.05);
        }

        .city-content {
            flex: 1;
            padding: 2rem;
        }

        .city-number {
            font-size: 0.75rem;
            color: #999;
            letter-spacing: 0.2em;
            margin-bottom: 1rem;
        }

        .city-name {
            font-size: 1.8rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
            letter-spacing: 0.1em;
            color: #2c2c2c;
        }

        .city-description {
            font-size: 0.95rem;
            line-height: 2;
            color: #666;
            margin-bottom: 2rem;
            letter-spacing: 0.03em;
        }

        .read-button {
            display: inline-block;
            padding: 0.9rem 3rem;
            background: #2c2c2c;
            color: white;
            text-decoration: none;
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            transition: all 0.3s ease;
            border: 1px solid #2c2c2c;
            cursor: pointer;
        }

        .read-button:hover {
            background: white;
            color: #2c2c2c;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background: #f5f5f5;
            padding: 4rem 2rem;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-title {
            font-size: 0.9rem;
            letter-spacing: 0.15em;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .footer-date {
            font-size: 0.85rem;
            color: #999;
            letter-spacing: 0.1em;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .hero {
                height: 60vh;
                min-height: 400px;
            }

            .city-item,
            .city-item:nth-child(even) {
                flex-direction: column;
                gap: 0;
                margin-bottom: 4rem;
            }

            .city-image-container {
                flex: 0 0 auto;
                width: 100%;
            }

            .city-content {
                padding: 2rem 1.5rem;
            }

            .intro {
                padding: 3rem 1.5rem 2rem;
            }

            .cities-section {
                padding: 2rem 1rem 3rem;
            }

            #map {
                height: 400px;
            }

            .map-controls {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                justify-content: center;
            }

            .map-btn {
                margin: 0;
                font-size: 0.8rem;
                padding: 0.5rem 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="hero">
        <img src="./assets/images/turkey-hero.jpg" alt="ãƒˆãƒ«ã‚³ã®é¢¨æ™¯" class="hero-image">
        <div class="hero-overlay">
            <h1 class="hero-title">
                å†™çœŸã§è¦‹ã¦ã„ãŸæ™¯è‰²ã¯ã€<br>
                æœ¬ç‰©ã«ã¯é ãåŠã°ãªã‹ã£ãŸã€‚
            </h1>
            <p class="hero-subtitle">
                ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã®ç©ºã€ãƒœã‚¹ãƒãƒ©ã‚¹ã®æœã€‚<br class="pc-only">
                è¡Œãä¾¡å€¤ãŒã‚ã‚‹ã€ã¨å¿ƒã‹ã‚‰è¨€ãˆã‚‹ã€‚
            </p>
        </div>
    </div>

    <!-- ã‚¤ãƒ³ãƒˆãƒ­ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="intro">
        <p class="intro-text">
            ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã®å¥‡å²©ç¾¤ã€ã‚³ãƒ³ãƒ¤ã®æ—‹å›èˆè¸Šã€ãƒ‘ãƒ ãƒƒã‚«ãƒ¬ã®ç™½ã„çŸ³ç°æ£šã€ã‚¨ãƒ•ã‚§ã‚½ã‚¹ã®å¤ä»£éºè·¡ã€ãã—ã¦ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«ã®å£®éº—ãªãƒ¢ã‚¹ã‚¯ã€‚æ±è¥¿æ–‡æ˜ãŒäº¤ã‚ã‚‹ãƒˆãƒ«ã‚³ã§å‡ºä¼šã£ãŸã€è¨€è‘‰ã«ãªã‚‰ãªã„ç¾ã—ã•ã®è¨˜éŒ²ã€‚
        </p>
    </section>

    <!-- ãƒãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="map-section">
        <div class="map-title">VISITED PLACES MAP</div>
        <div class="map-controls">
            <button class="map-btn" id="btn-light">Light</button>
            <button class="map-btn active" id="btn-sat">Satellite</button>
            <button class="map-btn" id="btn-tour">ãƒ„ã‚¢ãƒ¼å†ç”Ÿ</button>
        </div>
        <div id="map"></div>
    </section>

    <!-- éƒ½å¸‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="cities-section">
        
        <!-- ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ« -->
        <article class="city-item">
            <div class="city-image-container">
                <img src="./assets/images/turkey/safranbolu/02.jpg" alt="ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ«" class="city-image">
            </div>
            <div class="city-content">
                <p class="city-number">01</p>
                <h2 class="city-name">ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ«ã®è¡—</h2>
                <p class="city-description">
                    ã‚ªã‚¹ãƒãƒ³å¸å›½æ™‚ä»£ã®é¢å½±ã‚’è‰²æ¿ƒãæ®‹ã™ä¸–ç•Œéºç”£ã®è¡—ã€‚èµ¤ã„å±‹æ ¹ã¨ç™½å£ã®ä¼çµ±çš„ãªæœ¨é€ å®¶å±‹ãŒ1,000è»’ä»¥ä¸Šã‚‚ç¾å­˜ã—ã€çŸ³ç•³ã®å‚é“ã‚’æ­©ã‘ã°17ä¸–ç´€ã‹ã‚‰ç¶šãã‚¢ãƒ©ã‚¹ã‚¿ãƒã‚¶ãƒ¼ãƒ«ã®è³‘ã‚ã„ã«å‡ºä¼šãˆã¾ã™ã€‚
                </p>
                <a href="safranbolu-detail.html" class="read-button">èª­ã‚€</a>
            </div>
        </article>

        <!-- ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ -->
        <article class="city-item">
            <div class="city-image-container">
                <img src="./assets/images/turkey/cappadocia/01.jpg" alt="ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢" class="city-image">
            </div>
            <div class="city-content">
                <p class="city-number">02</p>
                <h2 class="city-name">ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã®å¤§åœ°</h2>
                <p class="city-description">
                    æ—©æœã®ç©ºã«æµ®ã‹ã¶è‰²ã¨ã‚Šã©ã‚Šã®ç†±æ°—çƒã€‚ã‚¦ãƒãƒ’ã‚µãƒ«åŸå¡ã€ä¸‰å§‰å¦¹ã®å²©ã€ãƒ©ã‚¯ãƒ€å²©ãªã©å€‹æ€§è±Šã‹ãªå¥‡å²©ç¾¤ã¨ã€ç´€å…ƒå‰ã‹ã‚‰ç¶šãåœ°ä¸‹éƒ½å¸‚ã‚«ãƒ«ãƒ€ãƒƒã‚¯ã€‚å¤ä»£ã®äººã€…ã®å¡æ™ºãŒè©°ã¾ã£ãŸå¹»æƒ³çš„ãªå¤§åœ°ã§ã™ã€‚
                </p>
                <a href="cappadocia-detail.html" class="read-button">èª­ã‚€</a>
            </div>
        </article>

        <!-- ã‚³ãƒ³ãƒ¤ -->
        <article class="city-item">
            <div class="city-image-container">
                <img src="./assets/images/turkey/konya/01.jpg" alt="ã‚³ãƒ³ãƒ¤" class="city-image">
            </div>
            <div class="city-content">
                <p class="city-number">03</p>
                <h2 class="city-name">ã‚³ãƒ³ãƒ¤ã®ç¥ç§˜</h2>
                <p class="city-description">
                    ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³ã®å¡”ãŒå°è±¡çš„ãªãƒ¡ãƒ´ãƒ©ãƒ¼ãƒŠåšç‰©é¤¨ã§ã€ã‚¤ã‚¹ãƒ©ãƒ ç¥ç§˜ä¸»ç¾©ã®ä¸–ç•Œã¸ã€‚å³æ‰‹ã‚’å¤©ã«ã€å·¦æ‰‹ã‚’åœ°ã«å‘ã‘ãªãŒã‚‰å›è»¢ã™ã‚‹æ—‹å›èˆè¸Šã‚»ãƒãƒ¼ã€‚é è¨€è€…ãƒ ãƒãƒ³ãƒãƒ‰ã®è–éºç‰©ã‹ã‚‰ã¯ã€è–”è–‡ã®é¦™ã‚ŠãŒæ¼‚ã„ã¾ã™ã€‚
                </p>
                <a href="konya-detail.html" class="read-button">èª­ã‚€</a>
            </div>
        </article>

        <!-- ãƒ‘ãƒ ãƒƒã‚«ãƒ¬ -->
        <article class="city-item">
            <div class="city-image-container">
                <img src="./assets/images/turkey/pamukkale/01.jpg" alt="ãƒ‘ãƒ ãƒƒã‚«ãƒ¬" class="city-image">
            </div>
            <div class="city-content">
                <p class="city-number">04</p>
                <h2 class="city-name">ãƒ‘ãƒ ãƒƒã‚«ãƒ¬ã®æ¸©æ³‰</h2>
                <p class="city-description">
                    ã€Œã‚³ãƒƒãƒˆãƒ³ã‚­ãƒ£ãƒƒã‚¹ãƒ«ã€ã¨å‘¼ã°ã‚Œã‚‹ç™½ã„çŸ³ç°æ£šã¨ã€ç´€å…ƒå‰2ä¸–ç´€ã‹ã‚‰ç¶šãæ¸©æ³‰åœ°ãƒ’ã‚¨ãƒ©ãƒãƒªã‚¹ã€‚ã‚¯ãƒ¬ã‚ªãƒ‘ãƒˆãƒ©ãƒ—ãƒ¼ãƒ«ã§ã¯ã€æ°´ä¸­ã«æ²ˆã‚€å¤ä»£ã®æŸ±ã®é–“ã‚’æ³³ããªãŒã‚‰ã€ãƒ­ãƒ¼ãƒå¸å›½ã®ãƒ†ãƒ«ãƒã‚¨æ–‡åŒ–ã‚’ä½“æ„Ÿã§ãã¾ã™ã€‚
                </p>
                <a href="pamukkale-detail.html" class="read-button">èª­ã‚€</a>
            </div>
        </article>

        <!-- ã‚¨ãƒ•ã‚§ã‚½ã‚¹ -->
        <article class="city-item">
            <div class="city-image-container">
                <img src="./assets/images/turkey/ephesus/01.jpg" alt="ã‚¨ãƒ•ã‚§ã‚½ã‚¹" class="city-image">
            </div>
            <div class="city-content">
                <p class="city-number">05</p>
                <h2 class="city-name">ã‚¨ãƒ•ã‚§ã‚½ã‚¹ã®éºè·¡</h2>
                <p class="city-description">
                    12ä¸‡å†Šã®è”µæ›¸ã‚’èª‡ã£ãŸã‚±ãƒ«ã‚¹ã‚¹å›³æ›¸é¤¨ã€25,000äººã‚’åå®¹ã—ãŸå¤§åŠ‡å ´ã€ãã—ã¦çŒ«ãŸã¡ãŒã‚†ã£ãŸã‚Šã¨æš®ã‚‰ã™å¤ä»£ãƒ­ãƒ¼ãƒéºè·¡ã€‚ãƒŠã‚¤ã‚­ã®ãƒ­ã‚´ã®åŸå‹ã¨ãªã£ãŸãƒ‹ã‚±ã®ãƒ¬ãƒªãƒ¼ãƒ•ã‚‚å¿…è¦‹ã§ã™ã€‚
                </p>
                <a href="ephesus-detail.html" class="read-button">èª­ã‚€</a>
            </div>
        </article>

        <!-- ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ« -->
        <article class="city-item">
            <div class="city-image-container">
                <img src="./assets/images/turkey/istanbul/01.jpg" alt="ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«" class="city-image">
            </div>
            <div class="city-content">
                <p class="city-number">06</p>
                <h2 class="city-name">æ°¸é ã®éƒ½ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«</h2>
                <p class="city-description">
                    ãƒœã‚¹ãƒãƒ©ã‚¹æµ·å³¡ã®å¤œæ˜ã‘ã€ã‚ªã‚¹ãƒãƒ³å¸å›½ã®å®®æ®¿ç¾¤ã€2ä¸‡æšã®ã‚¤ã‚ºãƒ‹ãƒƒã‚¯ã‚¿ã‚¤ãƒ«ãŒç¾ã—ã„ãƒ–ãƒ«ãƒ¼ãƒ¢ã‚¹ã‚¯ã€ãã—ã¦æ•™ä¼šã‹ã‚‰ãƒ¢ã‚¹ã‚¯ã¸ã¨å§¿ã‚’å¤‰ãˆãŸã‚¢ãƒ¤ãƒ»ã‚½ãƒ•ã‚£ã‚¢ã€‚æ±è¥¿ã®æ–‡æ˜ãŒå‡ºä¼šã†æ°¸é ã®éƒ½ã§ã™ã€‚
                </p>
                <a href="istanbul-detail.html" class="read-button">èª­ã‚€</a>
            </div>
        </article>

    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer>
        <div class="footer-content">
            <p class="footer-title">TURKEY JOURNEY</p>
            <p class="footer-date">2024.10.25 - 11.02</p>
        </div>
    </footer>

    <script>
        window.addEventListener('load', function () {
            mapboxgl.accessToken = 'pk.eyJ1IjoidG9qaW1hc2F5YSIsImEiOiJjbWgwN283dzExeW1pMndzMjZxaWUybzUyIn0.BDVLLueewnDmuhrYtKcUhA';

            let currentStyle = 'sat';
            const map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/satellite-streets-v12',
                center: [32.5, 39.0],
                zoom: 4.4,
                pitch: 0,
                bearing: 0,
                pitchWithRotate: true,
                dragRotate: true,
                touchZoomRotate: true
            });
            map.addControl(new mapboxgl.NavigationControl({ visualizePitch: true }), 'top-right');

            // åœ°å½¢ï¼ˆDEMï¼‰ï¼†ç©º
            map.on('style.load', () => {
                if (!map.getSource('mapbox-dem')) {
                    map.addSource('mapbox-dem', {
                        type: 'raster-dem',
                        url: 'mapbox://mapbox.terrain-rgb',
                        tileSize: 512,
                        maxzoom: 14
                    });
                }
                map.setTerrain({ source: 'mapbox-dem', exaggeration: 1.2 });
                if (!map.getLayer('sky')) {
                    map.addLayer({
                        id: 'sky',
                        type: 'sky',
                        paint: {
                            'sky-type': 'atmosphere',
                            'sky-atmosphere-sun-intensity': 10
                        }
                    });
                }
            });

            // è¨ªå•åœ°ç‚¹ï¼ˆæ‹¡å¼µç‰ˆãƒ‡ãƒ¼ã‚¿ï¼‰
            const places = [
                { 
                    id: 'safranbolu', 
                    idx: 1, 
                    name: 'ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ«', 
                    nameEn: 'Safranbolu', 
                    coord: [32.6945, 41.2561],
                    date: '2024.10.26',
                    image: './assets/images/turkey/safranbolu/02.jpg',
                    description: 'ã‚ªã‚¹ãƒãƒ³å¸å›½æ™‚ä»£ã®é¢å½±ã‚’è‰²æ¿ƒãæ®‹ã™ä¸–ç•Œéºç”£ã®è¡—ã€‚èµ¤ã„å±‹æ ¹ã¨ç™½å£ã®ä¼çµ±çš„ãªæœ¨é€ å®¶å±‹ãŒ1,000è»’ä»¥ä¸Šã‚‚ç¾å­˜ã€‚',
                    pageUrl: 'safranbolu-detail.html'
                },
                { 
                    id: 'cappadocia', 
                    idx: 2, 
                    name: 'ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢', 
                    nameEn: 'Cappadocia', 
                    coord: [34.8419, 38.6431],
                    date: '2024.10.27-28',
                    image: './assets/images/turkey/cappadocia/01.jpg',
                    description: 'æ—©æœã®ç©ºã«æµ®ã‹ã¶è‰²ã¨ã‚Šã©ã‚Šã®ç†±æ°—çƒã€‚å¥‡å²©ç¾¤ã¨ç´€å…ƒå‰ã‹ã‚‰ç¶šãåœ°ä¸‹éƒ½å¸‚ã‚«ãƒ«ãƒ€ãƒƒã‚¯ãŒç¹”ã‚Šãªã™å¹»æƒ³çš„ãªå¤§åœ°ã€‚',
                    pageUrl: 'cappadocia-detail.html'
                },
                { 
                    id: 'konya', 
                    idx: 3, 
                    name: 'ã‚³ãƒ³ãƒ¤', 
                    nameEn: 'Konya', 
                    coord: [32.4846, 37.8667],
                    date: '2024.10.28',
                    image: './assets/images/turkey/konya/01.jpg',
                    description: 'ã‚¤ã‚¹ãƒ©ãƒ ç¥ç§˜ä¸»ç¾©ã®ä¸­å¿ƒåœ°ã€‚å³æ‰‹ã‚’å¤©ã«ã€å·¦æ‰‹ã‚’åœ°ã«å‘ã‘ãªãŒã‚‰å›è»¢ã™ã‚‹æ—‹å›èˆè¸Šã‚»ãƒãƒ¼ã®è–åœ°ã€‚',
                    pageUrl: 'konya-detail.html'
                },
                { 
                    id: 'pamukkale', 
                    idx: 4, 
                    name: 'ãƒ‘ãƒ ãƒƒã‚«ãƒ¬', 
                    nameEn: 'Pamukkale', 
                    coord: [29.1208, 37.9200],
                    date: '2024.10.29',
                    image: './assets/images/turkey/pamukkale/01.jpg',
                    description: 'ã€Œã‚³ãƒƒãƒˆãƒ³ã‚­ãƒ£ãƒƒã‚¹ãƒ«ã€ã¨å‘¼ã°ã‚Œã‚‹ç™½ã„çŸ³ç°æ£šã€‚ã‚¯ãƒ¬ã‚ªãƒ‘ãƒˆãƒ©ãƒ—ãƒ¼ãƒ«ã§å¤ä»£ãƒ­ãƒ¼ãƒã®æ¸©æ³‰æ–‡åŒ–ã‚’ä½“æ„Ÿã€‚',
                    pageUrl: 'pamukkale-detail.html'
                },
                { 
                    id: 'ephesus', 
                    idx: 5, 
                    name: 'ã‚¨ãƒ•ã‚§ã‚½ã‚¹', 
                    nameEn: 'Ephesus', 
                    coord: [27.3409, 37.9392],
                    date: '2024.10.30',
                    image: './assets/images/turkey/ephesus/01.jpg',
                    description: 'ã‚±ãƒ«ã‚¹ã‚¹å›³æ›¸é¤¨ã€å¤§åŠ‡å ´ãªã©å¤ä»£ãƒ­ãƒ¼ãƒéºè·¡ãŒæ®‹ã‚‹ã€‚çŒ«ãŸã¡ãŒã‚†ã£ãŸã‚Šã¨æš®ã‚‰ã™éºè·¡ã®é¢¨æ™¯ã€‚',
                    pageUrl: 'ephesus-detail.html'
                },
                { 
                    id: 'istanbul', 
                    idx: 6, 
                    name: 'ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«', 
                    nameEn: 'Istanbul', 
                    coord: [28.9784, 41.0082],
                    date: '2024.10.31-11.02',
                    image: './assets/images/turkey/istanbul/01.jpg',
                    description: 'ãƒœã‚¹ãƒãƒ©ã‚¹æµ·å³¡ã®å¤œæ˜ã‘ã€ã‚ªã‚¹ãƒãƒ³å¸å›½ã®å®®æ®¿ç¾¤ã€‚æ±è¥¿ã®æ–‡æ˜ãŒäº¤å·®ã™ã‚‹æ°¸é ã®éƒ½ã€‚',
                    pageUrl: 'istanbul-detail.html'
                }
            ];

            // ç”»é¢ãƒ•ã‚£ãƒƒãƒˆ
            const bounds = new mapboxgl.LngLatBounds(places[0].coord, places[0].coord);
            for (const p of places) bounds.extend(p.coord);

            map.on('load', () => {
                // ã‚¢ãƒ¼ã‚¯ï¼ˆæ¸¬åœ°ç·šï¼‰ä½œæˆ
                const arcs = [];
                for (let i = 0; i < places.length - 1; i++) {
                    const gc = turf.greatCircle(
                        turf.point(places[i].coord),
                        turf.point(places[i+1].coord),
                        { npoints: 64 }
                    );
                    arcs.push(gc);
                }
                const routeFC = turf.featureCollection(arcs);

                map.addSource('arcs', { type: 'geojson', data: routeFC });
                map.addLayer({
                    id: 'arcs-line',
                    type: 'line',
                    source: 'arcs',
                    paint: {
                        'line-color': '#c49a6c',
                        'line-width': 2.8,
                        'line-opacity': 0.65,
                        'line-dasharray': [0, 2, 3]
                    }
                });

                // ãƒ€ãƒƒã‚·ãƒ¥ã‚¢ãƒ‹ãƒ¡
                let dash = 0;
                function animateDash() {
                    dash = (dash + 0.01) % 3;
                    map.setPaintProperty('arcs-line', 'line-dasharray', [dash, 2, 3]);
                    requestAnimationFrame(animateDash);
                }
                animateDash();

                // ãƒãƒ¼ã‚«ãƒ¼ï¼ˆå¼·åŒ–ç‰ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ä»˜ãï¼‰
                places.forEach(p => {
                    const el = document.createElement('div');
                    el.className = 'marker-badge';
                    el.textContent = p.idx;
                    
                    // å¼·åŒ–ç‰ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
                    const popup = new mapboxgl.Popup({ 
                        offset: 15,
                        closeButton: true,
                        maxWidth: '320px'
                    }).setHTML(`
                        <div>
                            <img src="${p.image}" 
                                 alt="${p.name}" 
                                 class="popup-image"
                                 onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 400 300%27%3E%3Crect fill=%27%23c49a6c%27 width=%27400%27 height=%27300%27/%3E%3Ctext x=%2750%25%27 y=%2750%25%27 font-size=%2724%27 fill=%27white%27 text-anchor=%27middle%27 opacity=%270.5%27%3E${p.name}%3C/text%3E%3C/svg%3E'">
                            <div class="popup-info">
                                <div class="popup-title">${p.name}</div>
                                <div class="popup-subtitle">${p.nameEn}</div>
                                <div class="popup-date">ğŸ“… ${p.date}</div>
                                <div class="popup-description">${p.description}</div>
                                <a href="${p.pageUrl}" class="popup-link">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
                            </div>
                        </div>
                    `);
                    
                    new mapboxgl.Marker({ element: el, anchor: 'center' })
                        .setLngLat(p.coord)
                        .setPopup(popup)
                        .addTo(map);
                });

                map.fitBounds(bounds, { 
                    padding: 70, 
                    duration: 2000,
                    pitch: 0,
                    bearing: 0,
                    essential: true
                });
            });

            // ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ—åˆ‡æ›¿
            const btnLight = document.getElementById('btn-light');
            const btnSat = document.getElementById('btn-sat');
            function setStyle(name) {
                currentStyle = name;
                btnLight.classList.toggle('active', name === 'light');
                btnSat.classList.toggle('active', name === 'sat');
                map.setStyle(name === 'light' ? 'mapbox://styles/mapbox/light-v11'
                                               : 'mapbox://styles/mapbox/satellite-streets-v12');
            }
            btnLight.addEventListener('click', () => setStyle('light'));
            btnSat.addEventListener('click', () => setStyle('sat'));

            // ãƒ„ã‚¢ãƒ¼ãƒœã‚¿ãƒ³ï¼šå„åœ°ç‚¹ã‚’é †ã« flyTo
            document.getElementById('btn-tour').addEventListener('click', async () => {
                for (const p of places) {
                    map.flyTo({ 
                        center: p.coord, 
                        zoom: 7.2, 
                        pitch: 55, 
                        bearing: -20, 
                        speed: 0.4,
                        curve: 1.2,
                        essential: true 
                    });
                    await new Promise(r => setTimeout(r, 2500));
                }
                // æœ€å¾Œã«å…¨ä½“
                map.fitBounds(new mapboxgl.LngLatBounds(places[0].coord, places[0].coord).extend(places.at(-1).coord), { 
                    padding: 70, 
                    duration: 2000,
                    essential: true 
                });
            });
        });
    </script>
</body>
</html>
