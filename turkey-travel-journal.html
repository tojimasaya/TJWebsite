<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-806426BQX2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-806426BQX2');
    </script>
    
    <title>ãƒˆãƒ«ã‚³æ—…è¡Œè¨˜ â€” ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã‹ã‚‰ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«ã¸</title>
    <meta name="description" content="ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«ã‹ã‚‰ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã€ãƒ‘ãƒ ãƒƒã‚«ãƒ¬ã¸ã€‚æ±è¥¿ã®æ–‡åŒ–ãŒäº¤éŒ¯ã™ã‚‹ãƒˆãƒ«ã‚³9æ—¥é–“ã®æ—…ã®è¨˜éŒ²ã€‚Mapboxã«ã‚ˆã‚‹3Dãƒ«ãƒ¼ãƒˆãƒãƒƒãƒ—ä»˜ãã€‚">
    <meta name="author" content="Toji Masaya">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&family=Noto+Serif+JP:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Mapbox -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">

    <style>
        /* ãƒˆãƒ«ã‚³ãƒšãƒ¼ã‚¸å°‚ç”¨ã®è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */
        /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .journal-hero {
            position: relative;
            height: 70vh;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            overflow: hidden;
            margin-top: 70px;
        }

        .journal-hero-bg {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover;
            z-index: 1;
            filter: brightness(0.6) contrast(1.1);
            transition: transform 10s ease;
        }
        
        .journal-hero:hover .journal-hero-bg {
            transform: scale(1.05);
        }

        .journal-hero-content {
            position: relative;
            z-index: 2;
            padding: 20px;
            max-width: 900px;
            animation: fadeInUp 1.5s ease 0.2s forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        .journal-label {
            font-family: var(--secondary-font);
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            opacity: 0.9;
            display: block;
        }

        .journal-title {
            font-family: 'Noto Serif JP', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 500;
            letter-spacing: 0.1em;
            line-height: 1.4;
            margin-bottom: 1.5rem;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .journal-subtitle {
            font-family: var(--primary-font);
            font-size: clamp(1rem, 2vw, 1.2rem);
            font-style: italic;
            opacity: 0.9;
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        /* ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ */
        .journal-intro {
            max-width: 800px;
            margin: 80px auto 60px;
            padding: 0 30px;
            text-align: center;
            font-family: 'Noto Serif JP', serif;
            line-height: 2.2;
            color: var(--text-color);
            font-size: 1.05rem;
        }

        /* ãƒãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .map-section {
            max-width: 1200px;
            margin: 0 auto 100px;
            padding: 0 30px;
        }

        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .map-title {
            font-family: var(--secondary-font);
            font-size: 0.9rem;
            letter-spacing: 0.2em;
            color: var(--text-light);
            text-transform: uppercase;
            font-weight: 600;
        }

        .map-controls {
            display: flex;
            gap: 10px;
        }

        .map-btn {
            background: white;
            border: 1px solid var(--border-color);
            padding: 8px 16px;
            border-radius: 4px;
            font-family: var(--secondary-font);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-color);
        }

        .map-btn:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .map-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        /* ãƒ„ã‚¢ãƒ¼ãƒœã‚¿ãƒ³ã‚’ç›®ç«‹ãŸã›ã‚‹ */
        #btn-tour {
            border-color: var(--accent-color);
            color: var(--accent-color);
            font-weight: 600;
        }
        
        #btn-tour:hover {
            background: var(--accent-color);
            color: white;
        }

        #map {
            width: 100%;
            height: 600px;
            border-radius: 4px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            background: #f3f3f3;
        }

        /* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»ã‚°ãƒªãƒƒãƒ‰ */
        .cities-section {
            max-width: 1000px;
            margin: 0 auto 120px;
            padding: 0 30px;
            position: relative;
        }

        /* ä¸­å¤®ã®ç·šï¼ˆPCã®ã¿ï¼‰ */
        @media (min-width: 769px) {
            .cities-section::before {
                content: '';
                position: absolute;
                top: 0; bottom: 0; left: 50%;
                width: 1px;
                background: linear-gradient(to bottom, transparent, var(--border-color) 10%, var(--border-color) 90%, transparent);
                transform: translateX(-50%);
                z-index: -1;
            }
        }

        .city-item {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            margin-bottom: 80px;
            opacity: 0; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ */
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .city-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* å¶æ•°ç•ªç›®ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåè»¢ */
        .city-item:nth-child(even) {
            direction: rtl;
        }
        
        .city-item:nth-child(even) .city-content {
            direction: ltr;
            text-align: right;
        }

        .city-image-wrapper {
            position: relative;
            overflow: hidden;
            border-radius: 2px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.08);
            aspect-ratio: 4/3;
        }

        .city-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.2, 1, 0.3, 1);
        }

        .city-item:hover .city-image {
            transform: scale(1.05);
        }

        .city-content {
            padding: 20px;
            background: var(--bg-color); /* ç·šã®ä¸Šã«æ–‡å­—ãŒä¹—ã‚‰ãªã„ã‚ˆã†ã«èƒŒæ™¯è‰²ã‚’è¨­å®š */
        }

        .city-number {
            font-family: var(--primary-font);
            font-size: 3rem;
            color: var(--border-color);
            line-height: 1;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .city-name {
            font-family: 'Noto Serif JP', serif;
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--text-color);
            letter-spacing: 0.05em;
        }

        .city-description {
            font-family: 'Noto Serif JP', serif;
            font-size: 0.95rem;
            line-height: 2;
            color: var(--text-light);
            margin-bottom: 30px;
        }

        .read-button {
            display: inline-block;
            padding: 12px 30px;
            background: transparent;
            border: 1px solid var(--text-color);
            color: var(--text-color);
            text-decoration: none;
            font-family: var(--secondary-font);
            font-size: 0.85rem;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
        }

        .read-button:not(.disabled):hover {
            background: var(--text-color);
            color: white;
        }

        .read-button.disabled {
            border-color: #e0e0e0;
            color: #aaa;
            cursor: default;
            pointer-events: none;
        }

        /* Mapbox Popup Customization */
        .mapboxgl-popup-content {
            padding: 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            font-family: var(--secondary-font);
        }

        .popup-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }

        .popup-info {
            padding: 15px;
        }

        .popup-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--text-color);
        }

        .popup-date {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-bottom: 10px;
            display: block;
        }

        .popup-desc {
            font-size: 0.85rem;
            line-height: 1.6;
            color: var(--text-light);
            margin-bottom: 15px;
        }

        .popup-link {
            font-size: 0.8rem;
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 500;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .journal-hero {
                height: 60vh;
            }

            .journal-title {
                font-size: 2rem;
            }

            #map {
                height: 400px;
            }

            .cities-section {
                padding: 0 20px;
            }

            .city-item,
            .city-item:nth-child(even) {
                grid-template-columns: 1fr;
                gap: 30px;
                direction: ltr;
                margin-bottom: 60px;
            }

            .city-item:nth-child(even) .city-content {
                text-align: left;
            }

            .city-content {
                padding: 0;
            }

            .city-number {
                font-size: 2rem;
            }

            .city-name {
                font-size: 1.6rem;
            }
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="/" class="nav-logo">TJM</a>
            <button class="nav-toggle" id="nav-toggle" aria-label="Menu">
                <span></span><span></span><span></span>
            </button>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="gallery.html" class="nav-link">Gallery</a></li>
                <li><a href="gear.html" class="nav-link">Gear</a></li>
                <li><a href="writings.html" class="nav-link">Writings</a></li>
                <li><a href="hongkong.html" class="nav-link">Hong Kong</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <header class="journal-hero">
        <img src="./assets/images/turkey-hero.jpg" alt="Turkey Landscape" class="journal-hero-bg" onerror="this.src='https://placehold.co/1920x1080/e0e0e0/333333?text=Turkey+Hero'">
        <div class="journal-hero-content">
            <span class="journal-label">TRAVEL JOURNAL</span>
            <h1 class="journal-title">
                å†™çœŸã§è¦‹ã¦ã„ãŸæ™¯è‰²ã¯ã€<br>
                æœ¬ç‰©ã«ã¯é ãåŠã°ãªã‹ã£ãŸã€‚
            </h1>
            <p class="journal-subtitle">
                The grand journey from Istanbul to Cappadocia
            </p>
        </div>
    </header>

    <!-- Intro -->
    <section class="journal-intro">
        <p>
            ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã®å¥‡å²©ç¾¤ã€ã‚³ãƒ³ãƒ¤ã®æ—‹å›èˆè¸Šã€ãƒ‘ãƒ ãƒƒã‚«ãƒ¬ã®ç™½ã„çŸ³ç°æ£šã€ã‚¨ãƒ•ã‚§ã‚½ã‚¹ã®å¤ä»£éºè·¡ã€ãã—ã¦ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«ã®å£®éº—ãªãƒ¢ã‚¹ã‚¯ã€‚
        </p>
        <p>
            ã‚¢ã‚¸ã‚¢ã¨ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã®æ¶ã‘æ©‹ã€ãƒˆãƒ«ã‚³ã€‚æ±è¥¿æ–‡æ˜ãŒäº¤ã‚ã‚‹ã“ã®åœ°ã§å‡ºä¼šã£ãŸã€è¨€è‘‰ã«ãªã‚‰ãªã„ç¾ã—ã•ã®è¨˜éŒ²ã€‚
            Leica Mã¨ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’ç‰‡æ‰‹ã«å·¡ã£ãŸã€è‰²å½©ã¨å…‰ã«æº€ã¡ãŸ9æ—¥é–“ã®æ—…ã€‚
        </p>
    </section>

    <!-- Map Section -->
    <section class="map-section">
        <div class="map-header">
            <div class="map-title">VISITED LOCATIONS & ROUTE</div>
            <div class="map-controls">
                <button class="map-btn" id="btn-light">Map</button>
                <button class="map-btn active" id="btn-sat">Satellite</button>
                <button class="map-btn" id="btn-tour">â–¶ Start Tour</button>
            </div>
        </div>
        <div id="map"></div>
    </section>

    <!-- Journey Timeline -->
    <section class="cities-section">

        <!-- 01: Safranbolu -->
        <article class="city-item">
            <div class="city-image-wrapper">
                <img src="./assets/images/turkey/safranbolu/02.jpg" alt="ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ«" class="city-image" onerror="this.src='https://placehold.co/800x600/e0e0e0/333333?text=Safranbolu'">
            </div>
            <div class="city-content">
                <div class="city-number">01</div>
                <h2 class="city-name">ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ«ã®è¡—</h2>
                <p class="city-description">
                    ã‚ªã‚¹ãƒãƒ³å¸å›½æ™‚ä»£ã®é¢å½±ã‚’è‰²æ¿ƒãæ®‹ã™ä¸–ç•Œéºç”£ã®è¡—ã€‚èµ¤ã„å±‹æ ¹ã¨ç™½å£ã®ä¼çµ±çš„ãªæœ¨é€ å®¶å±‹ãŒ1,000è»’ä»¥ä¸Šã‚‚ç¾å­˜ã—ã€çŸ³ç•³ã®å‚é“ã‚’æ­©ã‘ã°17ä¸–ç´€ã‹ã‚‰ç¶šãã‚¢ãƒ©ã‚¹ã‚¿ãƒã‚¶ãƒ¼ãƒ«ã®è³‘ã‚ã„ã«å‡ºä¼šãˆã¾ã™ã€‚
                </p>
                <a href="safranbolu-detail.html" class="read-button">Read Story</a>
            </div>
        </article>

        <!-- 02: Cappadocia -->
        <article class="city-item">
            <div class="city-image-wrapper">
                <img src="./assets/images/turkey/cappadocia/01.jpg" alt="ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢" class="city-image" onerror="this.src='https://placehold.co/800x600/e0e0e0/333333?text=Cappadocia'">
            </div>
            <div class="city-content">
                <div class="city-number">02</div>
                <h2 class="city-name">ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢ã®å¤§åœ°</h2>
                <p class="city-description">
                    æ—©æœã®ç©ºã«æµ®ã‹ã¶è‰²ã¨ã‚Šã©ã‚Šã®ç†±æ°—çƒã€‚ã‚¦ãƒãƒ’ã‚µãƒ«åŸå¡ã€ä¸‰å§‰å¦¹ã®å²©ã€ãƒ©ã‚¯ãƒ€å²©ãªã©å€‹æ€§è±Šã‹ãªå¥‡å²©ç¾¤ã¨ã€ç´€å…ƒå‰ã‹ã‚‰ç¶šãåœ°ä¸‹éƒ½å¸‚ã‚«ãƒ«ãƒ€ãƒƒã‚¯ã€‚å¤ä»£ã®äººã€…ã®å¡æ™ºãŒè©°ã¾ã£ãŸå¹»æƒ³çš„ãªå¤§åœ°ã§ã™ã€‚
                </p>
                <a href="cappadocia-detail.html" class="read-button">Read Story</a>
            </div>
        </article>

        <!-- 03: Konya -->
        <article class="city-item">
            <div class="city-image-wrapper">
                <img src="./assets/images/turkey/konya/01.jpg" alt="ã‚³ãƒ³ãƒ¤" class="city-image" onerror="this.src='https://placehold.co/800x600/e0e0e0/333333?text=Konya'">
            </div>
            <div class="city-content">
                <div class="city-number">03</div>
                <h2 class="city-name">ã‚³ãƒ³ãƒ¤ã®ç¥ç§˜</h2>
                <p class="city-description">
                    ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³ã®å¡”ãŒå°è±¡çš„ãªãƒ¡ãƒ´ãƒ©ãƒ¼ãƒŠåšç‰©é¤¨ã§ã€ã‚¤ã‚¹ãƒ©ãƒ ç¥ç§˜ä¸»ç¾©ã®ä¸–ç•Œã¸ã€‚å³æ‰‹ã‚’å¤©ã«ã€å·¦æ‰‹ã‚’åœ°ã«å‘ã‘ãªãŒã‚‰å›è»¢ã™ã‚‹æ—‹å›èˆè¸Šã‚»ãƒãƒ¼ã€‚é è¨€è€…ãƒ ãƒãƒ³ãƒãƒ‰ã®è–éºç‰©ã‹ã‚‰ã¯ã€è–”è–‡ã®é¦™ã‚ŠãŒæ¼‚ã„ã¾ã™ã€‚
                </p>
                <a href="konya-detail.html" class="read-button">Read Story</a>
            </div>
        </article>

        <!-- 04: Pamukkale -->
        <article class="city-item">
            <div class="city-image-wrapper">
                <img src="./assets/images/turkey/pamukkale/01.jpg" alt="ãƒ‘ãƒ ãƒƒã‚«ãƒ¬" class="city-image" onerror="this.src='https://placehold.co/800x600/e0e0e0/333333?text=Pamukkale'">
            </div>
            <div class="city-content">
                <div class="city-number">04</div>
                <h2 class="city-name">ãƒ‘ãƒ ãƒƒã‚«ãƒ¬ã®æ¸©æ³‰</h2>
                <p class="city-description">
                    ã€Œã‚³ãƒƒãƒˆãƒ³ã‚­ãƒ£ãƒƒã‚¹ãƒ«ã€ã¨å‘¼ã°ã‚Œã‚‹ç™½ã„çŸ³ç°æ£šã¨ã€ç´€å…ƒå‰2ä¸–ç´€ã‹ã‚‰ç¶šãæ¸©æ³‰åœ°ãƒ’ã‚¨ãƒ©ãƒãƒªã‚¹ã€‚ã‚¯ãƒ¬ã‚ªãƒ‘ãƒˆãƒ©ãƒ—ãƒ¼ãƒ«ã§ã¯ã€æ°´ä¸­ã«æ²ˆã‚€å¤ä»£ã®æŸ±ã®é–“ã‚’æ³³ããªãŒã‚‰ã€ãƒ­ãƒ¼ãƒå¸å›½ã®ãƒ†ãƒ«ãƒã‚¨æ–‡åŒ–ã‚’ä½“æ„Ÿã§ãã¾ã™ã€‚
                </p>
                <a href="pamukkale-detail.html" class="read-button">Read Story</a>
            </div>
        </article>

        <!-- 05: Ephesus -->
        <article class="city-item">
            <div class="city-image-wrapper">
                <img src="./assets/images/turkey/ephesus/01.jpg" alt="ã‚¨ãƒ•ã‚§ã‚½ã‚¹" class="city-image" onerror="this.src='https://placehold.co/800x600/e0e0e0/333333?text=Ephesus'">
            </div>
            <div class="city-content">
                <div class="city-number">05</div>
                <h2 class="city-name">ã‚¨ãƒ•ã‚§ã‚½ã‚¹ã®éºè·¡</h2>
                <p class="city-description">
                    12ä¸‡å†Šã®è”µæ›¸ã‚’èª‡ã£ãŸã‚±ãƒ«ã‚¹ã‚¹å›³æ›¸é¤¨ã€25,000äººã‚’åå®¹ã—ãŸå¤§åŠ‡å ´ã€ãã—ã¦çŒ«ãŸã¡ãŒã‚†ã£ãŸã‚Šã¨æš®ã‚‰ã™å¤ä»£ãƒ­ãƒ¼ãƒéºè·¡ã€‚ãƒŠã‚¤ã‚­ã®ãƒ­ã‚´ã®åŸå‹ã¨ãªã£ãŸãƒ‹ã‚±ã®ãƒ¬ãƒªãƒ¼ãƒ•ã‚‚å¿…è¦‹ã§ã™ã€‚
                </p>
                <a href="ephesus-detail.html" class="read-button">Read Story</a>
            </div>
        </article>

        <!-- 06: Istanbul -->
        <article class="city-item">
            <div class="city-image-wrapper">
                <img src="./assets/images/turkey/istanbul/01.jpg" alt="ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«" class="city-image" onerror="this.src='https://placehold.co/800x600/e0e0e0/333333?text=Istanbul'">
            </div>
            <div class="city-content">
                <div class="city-number">06</div>
                <h2 class="city-name">æ°¸é ã®éƒ½ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«</h2>
                <p class="city-description">
                    ãƒœã‚¹ãƒãƒ©ã‚¹æµ·å³¡ã®å¤œæ˜ã‘ã€ã‚ªã‚¹ãƒãƒ³å¸å›½ã®å®®æ®¿ç¾¤ã€2ä¸‡æšã®ã‚¤ã‚ºãƒ‹ãƒƒã‚¯ã‚¿ã‚¤ãƒ«ãŒç¾ã—ã„ãƒ–ãƒ«ãƒ¼ãƒ¢ã‚¹ã‚¯ã€ãã—ã¦æ•™ä¼šã‹ã‚‰ãƒ¢ã‚¹ã‚¯ã¸ã¨å§¿ã‚’å¤‰ãˆãŸã‚¢ãƒ¤ãƒ»ã‚½ãƒ•ã‚£ã‚¢ã€‚æ±è¥¿ã®æ–‡æ˜ãŒå‡ºä¼šã†æ°¸é ã®éƒ½ã§ã™ã€‚
                </p>
                <a href="istanbul-detail.html" class="read-button">Read Story</a>
            </div>
        </article>

    </section>

    <!-- Back to Home -->
    <section class="back-to-home">
        <a href="/" class="back-link">
            <span class="back-arrow">â†</span>
            <span>Back to Home</span>
        </a>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2026 Toji Masaya. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Navigation Toggle Logic
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');

        if (navToggle && navMenu) {
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                navToggle.classList.toggle('active');
            });
        }

        // Scroll Animation Observer
        const observerOptions = {
            threshold: 0.15,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.city-item').forEach(item => {
            observer.observe(item);
        });

        // Mapbox Integration
        window.addEventListener('load', function () {
            mapboxgl.accessToken = 'pk.eyJ1IjoidG9qaW1hc2F5YSIsImEiOiJjbWgwN283dzExeW1pMndzMjZxaWUybzUyIn0.BDVLLueewnDmuhrYtKcUhA';

            let currentStyle = 'sat';
            const map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/satellite-streets-v12',
                center: [32.5, 39.0],
                zoom: 4.4,
                pitch: 0,
                bearing: 0,
                pitchWithRotate: true,
                dragRotate: true,
                touchZoomRotate: true
            });
            map.addControl(new mapboxgl.NavigationControl({ visualizePitch: true }), 'top-right');

            // è¨ªå•åœ°ç‚¹ãƒ‡ãƒ¼ã‚¿
            const places = [
                { 
                    id: 'safranbolu', 
                    idx: 1, 
                    name: 'ã‚µãƒ•ãƒ©ãƒ³ãƒœãƒ«', 
                    nameEn: 'Safranbolu', 
                    coord: [32.6945, 41.2561],
                    date: '2024.10.26',
                    image: './assets/images/turkey/safranbolu/02.jpg',
                    description: 'ã‚ªã‚¹ãƒãƒ³å¸å›½æ™‚ä»£ã®é¢å½±ã‚’è‰²æ¿ƒãæ®‹ã™ä¸–ç•Œéºç”£ã®è¡—ã€‚',
                    pageUrl: 'safranbolu-detail.html'
                },
                { 
                    id: 'cappadocia', 
                    idx: 2, 
                    name: 'ã‚«ãƒƒãƒ‘ãƒ‰ã‚­ã‚¢', 
                    nameEn: 'Cappadocia', 
                    coord: [34.8419, 38.6431],
                    date: '2024.10.27-28',
                    image: './assets/images/turkey/cappadocia/01.jpg',
                    description: 'æ—©æœã®ç©ºã«æµ®ã‹ã¶è‰²ã¨ã‚Šã©ã‚Šã®ç†±æ°—çƒã¨å¥‡å²©ç¾¤ã€‚',
                    pageUrl: 'cappadocia-detail.html'
                },
                { 
                    id: 'konya', 
                    idx: 3, 
                    name: 'ã‚³ãƒ³ãƒ¤', 
                    nameEn: 'Konya', 
                    coord: [32.4846, 37.8667],
                    date: '2024.10.28',
                    image: './assets/images/turkey/konya/01.jpg',
                    description: 'ã‚¤ã‚¹ãƒ©ãƒ ç¥ç§˜ä¸»ç¾©ã®ä¸­å¿ƒåœ°ã€‚æ—‹å›èˆè¸Šã‚»ãƒãƒ¼ã®è–åœ°ã€‚',
                    pageUrl: 'konya-detail.html'
                },
                { 
                    id: 'pamukkale', 
                    idx: 4, 
                    name: 'ãƒ‘ãƒ ãƒƒã‚«ãƒ¬', 
                    nameEn: 'Pamukkale', 
                    coord: [29.1208, 37.9200],
                    date: '2024.10.29',
                    image: './assets/images/turkey/pamukkale/01.jpg',
                    description: 'ã€Œç¶¿ã®åŸã€ã¨å‘¼ã°ã‚Œã‚‹ç™½ã„çŸ³ç°æ£šã¨å¤ä»£éºè·¡ã€‚',
                    pageUrl: 'pamukkale-detail.html'
                },
                { 
                    id: 'ephesus', 
                    idx: 5, 
                    name: 'ã‚¨ãƒ•ã‚§ã‚½ã‚¹', 
                    nameEn: 'Ephesus', 
                    coord: [27.3409, 37.9392],
                    date: '2024.10.30',
                    image: './assets/images/turkey/ephesus/01.jpg',
                    description: 'ã‚±ãƒ«ã‚¹ã‚¹å›³æ›¸é¤¨ã€å¤§åŠ‡å ´ãªã©å¤ä»£ãƒ­ãƒ¼ãƒéºè·¡ãŒæ®‹ã‚‹ã€‚',
                    pageUrl: 'ephesus-detail.html'
                },
                { 
                    id: 'istanbul', 
                    idx: 6, 
                    name: 'ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«', 
                    nameEn: 'Istanbul', 
                    coord: [28.9784, 41.0082],
                    date: '2024.10.31-11.02',
                    image: './assets/images/turkey/istanbul/01.jpg',
                    description: 'ãƒœã‚¹ãƒãƒ©ã‚¹æµ·å³¡ã®å¤œæ˜ã‘ã€‚æ±è¥¿ã®æ–‡æ˜ãŒäº¤å·®ã™ã‚‹æ°¸é ã®éƒ½ã€‚',
                    pageUrl: 'istanbul-detail.html'
                }
            ];

            map.on('style.load', () => {
                // åœ°å½¢ã¨ç©º
                if (!map.getSource('mapbox-dem')) {
                    map.addSource('mapbox-dem', {
                        type: 'raster-dem',
                        url: 'mapbox://mapbox.terrain-rgb',
                        tileSize: 512,
                        maxzoom: 14
                    });
                }
                map.setTerrain({ source: 'mapbox-dem', exaggeration: 1.5 });
                
                if (!map.getLayer('sky')) {
                    map.addLayer({
                        id: 'sky',
                        type: 'sky',
                        paint: {
                            'sky-type': 'atmosphere',
                            'sky-atmosphere-sun-intensity': 5
                        }
                    });
                }
            });

            // ãƒãƒ¼ã‚«ãƒ¼ã¨ãƒ«ãƒ¼ãƒˆ
            map.on('load', () => {
                // ã‚¢ãƒ¼ã‚¯ï¼ˆãƒ«ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ï¼‰
                const arcs = [];
                for (let i = 0; i < places.length - 1; i++) {
                    const gc = turf.greatCircle(
                        turf.point(places[i].coord),
                        turf.point(places[i+1].coord),
                        { npoints: 64 }
                    );
                    arcs.push(gc);
                }
                const routeFC = turf.featureCollection(arcs);

                map.addSource('arcs', { type: 'geojson', data: routeFC });
                map.addLayer({
                    id: 'arcs-line',
                    type: 'line',
                    source: 'arcs',
                    paint: {
                        'line-color': '#2563eb', // Theme Accent Blue
                        'line-width': 3,
                        'line-opacity': 0.8,
                        'line-dasharray': [0, 2]
                    }
                });

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨
                let dash = 0;
                function animateDash() {
                    dash = (dash + 0.02) % 2; // Speed up slightly
                    if(map.getLayer('arcs-line')) {
                        map.setPaintProperty('arcs-line', 'line-dasharray', [dash, 2]);
                    }
                    requestAnimationFrame(animateDash);
                }
                animateDash();

                // ãƒãƒ¼ã‚«ãƒ¼è¨­ç½®
                places.forEach(p => {
                    const el = document.createElement('div');
                    el.className = 'marker';
                    el.style.backgroundColor = '#2563eb';
                    el.style.width = '24px';
                    el.style.height = '24px';
                    el.style.borderRadius = '50%';
                    el.style.border = '3px solid white';
                    el.style.boxShadow = '0 2px 10px rgba(0,0,0,0.3)';
                    el.style.cursor = 'pointer';
                    el.style.display = 'flex';
                    el.style.alignItems = 'center';
                    el.style.justifyContent = 'center';
                    el.style.color = 'white';
                    el.style.fontWeight = 'bold';
                    el.style.fontSize = '12px';
                    el.textContent = p.idx;
                    
                    const popup = new mapboxgl.Popup({ 
                        offset: 25,
                        closeButton: false,
                        maxWidth: '300px'
                    }).setHTML(`
                        <div>
                            <img src="${p.image}" alt="${p.name}" class="popup-image" onerror="this.src='https://placehold.co/300x160/e0e0e0/333333?text=${p.name}'">
                            <div class="popup-info">
                                <div class="popup-title">${p.name}</div>
                                <div class="popup-date">ğŸ“… ${p.date}</div>
                                <div class="popup-desc">${p.description}</div>
                                <a href="${p.pageUrl}" class="popup-link">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
                            </div>
                        </div>
                    `);
                    
                    new mapboxgl.Marker({ element: el })
                        .setLngLat(p.coord)
                        .setPopup(popup)
                        .addTo(map);
                });

                // å…¨ä½“è¡¨ç¤º
                const bounds = new mapboxgl.LngLatBounds();
                places.forEach(p => bounds.extend(p.coord));
                map.fitBounds(bounds, { padding: 80 });
            });

            // ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ—åˆ‡æ›¿
            const btnLight = document.getElementById('btn-light');
            const btnSat = document.getElementById('btn-sat');
            function setStyle(name) {
                currentStyle = name;
                btnLight.classList.toggle('active', name === 'light');
                btnSat.classList.toggle('active', name === 'sat');
                map.setStyle(name === 'light' ? 'mapbox://styles/mapbox/light-v11'
                                               : 'mapbox://styles/mapbox/satellite-streets-v12');
            }
            btnLight.addEventListener('click', () => setStyle('light'));
            btnSat.addEventListener('click', () => setStyle('sat'));

            // ãƒ„ã‚¢ãƒ¼å†ç”Ÿ
            document.getElementById('btn-tour').addEventListener('click', async () => {
                for (const p of places) {
                    map.flyTo({ 
                        center: p.coord, 
                        zoom: 8, 
                        pitch: 60, 
                        bearing: -20, 
                        speed: 0.6,
                        curve: 1.2,
                        essential: true 
                    });
                    
                    // è©²å½“ã™ã‚‹éƒ½å¸‚ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
                    // const targetEl = document.querySelectorAll('.city-item')[p.idx - 1];
                    // targetEl.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    await new Promise(r => setTimeout(r, 4000));
                }
                // æœ€å¾Œã«å…¨ä½“ã«æˆ»ã‚‹
                const bounds = new mapboxgl.LngLatBounds();
                places.forEach(p => bounds.extend(p.coord));
                map.fitBounds(bounds, { padding: 80, pitch: 0, bearing: 0, duration: 2000 });
            });
        });
    </script>
</body>
</html>
