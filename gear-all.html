<!DOCTYPE html>
<html lang="ja">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-806426BQX2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-806426BQX2');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gear — Toji Masaya</title>
    
    <!-- SEO & OGP -->
    <meta name="description" content="田路昌也が実際に使用している旅行用カメラ機材とガジェット。Leica、ドローン、アクセサリーの詳細レビューと購入情報。">
    <meta name="keywords" content="田路昌也, カメラ機材, ドローン, 旅行ガジェット, Leica, DJI, レビュー">
    <meta name="author" content="Toji Masaya">
    
    <!-- OGP -->
    <meta property="og:title" content="Gear — Toji Masaya">
    <meta property="og:description" content="旅行に最適化したカメラ機材とガジェットの詳細レビュー">
    <meta property="og:image" content="https://tojimasaya.com/Oreryu.jpg">
    <meta property="og:url" content="https://tojimasaya.com/gear.html">
    <meta property="og:type" content="website">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Theme color -->
    <meta name="theme-color" content="#fafafa">
    <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)">
<link rel="icon" type="image/png" href="favicon.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="canonical" href="https://tojimasaya.com/gear-all.html">
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="skip-link">メインコンテンツにスキップ</a>

    <script src="js/site-header.js"></script>

    <!-- ギアヒーロー -->
    <section class="gear-hero" role="banner">
        <div class="gear-hero-image">
            <img src="Oreryu.jpg" alt="俺流トラベルガジェット" loading="eager" width="1920" height="1080">
            <div class="gear-hero-overlay">
                <h1 class="gear-hero-title">Gear</h1>
                <p class="gear-hero-subtitle">俺流トラベルガジェット</p>
            </div>
        </div>
    </section>

    <!-- メインコンテンツ -->
    <main id="main-content" class="main-content">
        <div class="container">
            <!-- ギア紹介 -->
            <section class="gear-intro">
                <p class="lead">旅行に最適化したカメラ機材とガジェットをご紹介します。実際に世界各地で使用した経験を基に、重量・サイズ・性能のバランスを重視した選択をしています。気になるアイテムや購入を検討されているものがあれば、お気軽にお問い合わせください。</p>
            </section>

            <!-- カテゴリーフィルター -->
            <section class="gear-filters">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">All</button>
                    <button class="filter-tab" data-filter="camera">Camera</button>
                    <button class="filter-tab" data-filter="drone">Drone</button>
                    <button class="filter-tab" data-filter="accessories">Accessories</button>
                    <button class="filter-tab" data-filter="editing">Editing</button>
                </div>
            </section>

            <!-- ギアグリッド -->
            <section class="gear-section">
                <div class="gear-grid" id="gearGrid">
                    <!-- ローディング表示 -->
                    <div class="loading" id="loadingIndicator">
                        <div class="loading-spinner"></div>
                        <p>機材データを読み込み中...</p>
                    </div>
                </div>
            </section>

            <!-- 売却について -->
            <section class="selling-info">
                <h2>機材の売却について</h2>
                <div class="selling-content">
                    <p>新しい機材への更新に伴い、使用しなくなった機材を時々売却しています。状態の良い機材のみを丁寧にメンテナンスした上で出品いたします。</p>
                    
                    <div class="selling-features">
                        <div class="feature-item">
                            <h4>丁寧な使用</h4>
                            <p>すべての機材は旅行での使用がメインで、スタジオ等での酷使はしていません。</p>
                        </div>
                        <div class="feature-item">
                            <h4>正直な状態説明</h4>
                            <p>小さな傷や使用感についても正直にお伝えします。</p>
                        </div>
                        <div class="feature-item">
                            <h4>安心の取引</h4>
                            <p>動作確認を十分に行い、必要に応じて元箱や付属品もお付けします。</p>
                        </div>
                    </div>
                    
                    <div class="contact-section">
                        <h4>お問い合わせ</h4>
                        <p>気になる機材や購入をご検討の場合は、お気軽にお問い合わせください。</p>
                        <a href="mailto:tojimasaya07@gmail.com" class="btn btn-primary btn-large">メールでお問い合わせ</a>
                    </div>
                </div>
            </section>

            <!-- ホームに戻る -->
            <section class="back-to-home">
                <a href="/" class="back-link">
                    <span class="back-arrow">←</span>
                    <span>Back to Home</span>
                </a>
            </section>

            <!-- フッター -->
            <footer class="footer" role="contentinfo">
                <div class="footer-content">
                    <p>&copy; <script>document.write(new Date().getFullYear())</script> Toji Masaya. All rights reserved.</p>
                    <p>Built with care in Japan</p>
                </div>
            </footer>
        </div>
    </main>

    <!-- お問い合わせモーダル -->
    <div id="contact-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-content contact-modal-content">
            <button class="close-modal" onclick="closeContactModal()" aria-label="モーダルを閉じる">&times;</button>
            <h3 id="contact-gear-title">機材についてお問い合わせ</h3>
            <form id="contact-form" class="contact-form">
                <div class="form-group">
                    <label for="contact-name">お名前</label>
                    <input type="text" id="contact-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="contact-email">メールアドレス</label>
                    <input type="email" id="contact-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="contact-message">メッセージ</label>
                    <textarea id="contact-message" name="message" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-large">送信</button>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // グローバル変数
        let gearData = {};
        let currentFilter = 'all';

        // 初期化
        document.addEventListener('DOMContentLoaded', function() {
            loadGearData();
        });

        // initializeNavigation は site-header.js に移行済み

        // 機材データをロード
        async function loadGearData() {
            try {
                const response = await fetch('data/gear.json');
                if (!response.ok) {
                    throw new Error('データの読み込みに失敗しました');
                }
                const json = await response.json();
                // data/gear.json の categories 構造をフラットなオブジェクトに変換
                gearData = {};
                Object.entries(json.categories || {}).forEach(([catKey, cat]) => {
                    (cat.items || []).forEach(item => {
                        gearData[item.id] = { ...item, category: catKey };
                    });
                });
                renderGearItems();
                initializeFilters();
            } catch (error) {
                console.error('機材データの読み込みエラー:', error);
                showErrorMessage();
            }
        }

        // 機材アイテムをレンダリング
        function renderGearItems() {
            const grid = document.getElementById('gearGrid');
            const loadingIndicator = document.getElementById('loadingIndicator');
            
            // ローディング非表示
            if (loadingIndicator) {
                loadingIndicator.remove();
            }

            // グリッドをクリア
            grid.innerHTML = '';

            // 機材アイテムを生成
            Object.entries(gearData).forEach(([id, gear]) => {
                const item = createGearItem(id, gear);
                grid.appendChild(item);
            });
        }

        // 機材アイテム作成
        function createGearItem(id, gear) {
            const article = document.createElement('article');
            article.className = `gear-item ${gear.featured ? 'featured' : ''}`;
            article.setAttribute('data-category', gear.category);

            article.innerHTML = `
                <div class="gear-image">
                    <img src="${gear.image}" alt="${gear.name}" loading="lazy" width="400" height="300">
                    <div class="gear-status ${gear.status}">${getStatusLabel(gear.status)}</div>
                </div>
                <div class="gear-info">
                    <div class="gear-header">
                        <h3>${gear.name}</h3>
                        <div class="gear-price">${gear.price}</div>
                    </div>
                    <div class="gear-specs">
                        ${gear.specs.map(spec => `<span class="spec-item">${spec}</span>`).join('')}
                    </div>
                    <p class="gear-description">${gear.description}</p>
                    <div class="gear-experience">
                        <h4>使用体験</h4>
                        <p>${gear.experience}</p>
                    </div>
                    <div class="gear-actions">
                        <a href="${gear.amazonUrl}" target="_blank" rel="noopener noreferrer" class="btn btn-primary">Amazon</a>
                        <a href="${gear.reviewUrl}" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">詳細レビュー</a>
                        ${gear.status === 'available' || gear.status === 'considering' 
                            ? `<button class="btn btn-contact" onclick="contactAboutGear('${gear.name}')">お問い合わせ</button>`
                            : `<span class="btn btn-disabled">${gear.status === 'sold' ? '売却済み' : '非売品'}</span>`
                        }
                    </div>
                </div>
            `;

            return article;
        }

        // ステータスラベル取得
        function getStatusLabel(status) {
            const labels = {
                'available': 'Available',
                'sold': 'Sold',
                'considering': 'Considering',
                'not-for-sale': 'Not for Sale'
            };
            return labels[status] || status;
        }

        // フィルター機能初期化
        function initializeFilters() {
            const filterTabs = document.querySelectorAll('.filter-tab');
            
            filterTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    
                    // アクティブタブを更新
                    filterTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // フィルタリング実行
                    filterGearItems(filter);
                });
            });
        }

        // 機材アイテムフィルタリング
        function filterGearItems(filter) {
            currentFilter = filter;
            const gearItems = document.querySelectorAll('.gear-item');
            
            gearItems.forEach(item => {
                const category = item.getAttribute('data-category');
                
                if (filter === 'all' || category === filter) {
                    item.style.display = 'block';
                    item.classList.remove('hidden');
                } else {
                    item.style.display = 'none';
                    item.classList.add('hidden');
                }
            });
        }

        // エラーメッセージ表示
        function showErrorMessage() {
            const grid = document.getElementById('gearGrid');
            grid.innerHTML = `
                <div class="loading">
                    <p>機材データの読み込みに失敗しました。</p>
                    <button class="btn btn-primary" onclick="loadGearData()">再試行</button>
                </div>
            `;
        }

        // お問い合わせモーダル
        function contactAboutGear(gearName) {
            const modal = document.getElementById('contact-modal');
            const title = document.getElementById('contact-gear-title');
            const messageField = document.getElementById('contact-message');
            
            title.textContent = `${gearName} についてお問い合わせ`;
            messageField.value = `${gearName} について詳細を教えてください。\n\n・購入時期：\n・使用状況：\n・付属品：\n・希望価格：`;
            
            modal.setAttribute('aria-hidden', 'false');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeContactModal() {
            const modal = document.getElementById('contact-modal');
            modal.setAttribute('aria-hidden', 'true');
            modal.style.display = 'none';
            document.body.style.overflow = '';
        }

        // フォーム送信
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const name = formData.get('name');
            const email = formData.get('email');
            const message = formData.get('message');
            
            // メール送信（mailto）
            const subject = encodeURIComponent('機材についてお問い合わせ');
            const body = encodeURIComponent(`お名前: ${name}\nメールアドレス: ${email}\n\nメッセージ:\n${message}`);
            
            window.location.href = `mailto:tojimasaya07@gmail.com?subject=${subject}&body=${body}`;
            
            closeContactModal();
        });

        // ESCキーでモーダルを閉じる
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeContactModal();
            }
        });

        // モーダル背景をクリックして閉じる
        document.getElementById('contact-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeContactModal();
            }
        });

        // 外部リンクのセキュリティ強化
        document.querySelectorAll('a[target="_blank"]').forEach(link => {
            link.rel = 'noopener noreferrer';
        });
    </script>
    
    <!-- JSON-LD structured data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "Toji Masaya Camera Gear",
        "description": "田路昌也が実際に使用している旅行用カメラ機材とガジェットのレビュー",
        "author": {
            "@type": "Person",
            "name": "田路昌也",
            "alternateName": "Toji Masaya"
        },
        "url": "https://tojimasaya.com/gear.html"
    }
    </script>
</body>
</html>
