<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toji Masaya – drone/camera/travel</title>

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <meta name="description" content="田路昌也(TJ)のポートフォリオサイト。ライカやドローンを片手に、旅先の空気や日々の発見を写真と文章で記録しています。">
  <meta name="keywords" content="田路昌也, TJ, 旅行, 写真, ライター, 香港, カッパドキア, note">
  <meta name="author" content="Toji Masaya">

  <meta property="og:title" content="TJM – drone/camera/travel">
  <meta property="og:description" content="香港と日本を行き来しながら、旅先で出会った風景や小さな発見を写真と言葉で綴っています。イスタンブールから香港まで、ライカとドローンで切り取った世界。">
  <meta property="og:image" content="https://tojimasaya.com/assets/images/gallery/weekly.jpg">
  <meta property="og:url" content="https://tojimasaya.com">
  <meta property="og:type" content="website">

  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
  
  <style>
    /* 見出しのスタイル調整 */
    .latest-title {
      font-family: 'Crimson Text', serif;
      font-size: 2rem;
      font-weight: 400;
      letter-spacing: 0.05em;
      color: #2c2c2c;
      margin-bottom: 2.5rem;
      text-align: center;
    }

    .jp-subtitle {
      display: block;
      font-family: 'Hiragino Mincho ProN', 'Yu Mincho', 'YuMincho', 'HG明朝E', 'MS P明朝', 'MS 明朝', serif;
      font-size: 0.9rem;
      font-weight: 400;
      letter-spacing: 0.15em;
      color: #999;
      margin-top: 0.5rem;
    }

    /* レスポンシブ対応 */
    @media (max-width: 768px) {
      .latest-title {
        font-size: 1.6rem;
        margin-bottom: 2rem;
      }
      
      .jp-subtitle {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>

  <nav class="main-nav">
    <div class="nav-container">
      <a href="/" class="nav-logo">TJM</a>
      <div class="nav-toggle"><span></span><span></span><span></span></div>
      <ul class="nav-menu">
        <li><a href="/" class="nav-link">Home</a></li>
        <li><a href="gallery.html" class="nav-link">Gallery</a></li>
        <li><a href="gear.html" class="nav-link">Gear</a></li>
        <li><a href="writings.html" class="nav-link">Writings</a></li>
      </ul>
    </div>
  </nav>

  <div class="hero">
    <div class="hero-fixed-wrapper">
      <div class="slider-container">
        
        <div class="hero-slide active">
          <img src="assets/images/gallery/istanbul.jpg" alt="イスタンブール">
        </div>

        <div class="hero-slide">
          <img src="assets/images/gallery/weekly.jpg" alt="Weekly">
        </div>

        <div class="hero-slide">
          <img src="assets/images/gallery/monthly.jpg" alt="Monthly">
        </div>

        <div class="hero-slide">
          <img src="assets/images/gallery/hongkong.jpg" alt="香港">
        </div>

        <div class="hero-overlay">
          <h1 class="hero-title">LEICA, DRONE, AND TRAVEL</h1>
          <p class="lead">香港・日本を拠点に、旅の断片を写真と文章で記録しています。</p>
          <div class="hero-dots">
            <span class="dot active" data-slide="0"></span>
            <span class="dot" data-slide="1"></span>
            <span class="dot" data-slide="2"></span>
            <span class="dot" data-slide="3"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="hero-spacer"></div>
  </div>

  <main class="main-content">
    
    <section class="intro container">
      <p class="lead intro-text">
        イスタンブールから香港まで。<br>
        Leica M10とドローンを片手に、旅先で出会った風景や小さな発見を写真と言葉で綴っています。
      </p>
    </section>

    <section class="latest-section container">
      <h2 class="latest-title">
        Highlights
        <span class="jp-subtitle">ピックアップ</span>
      </h2>
      <div class="articles-grid-3col">
        
        <article class="content-card">
          <a href="https://note.com/tojimasaya/n/n188241da2ab6" target="_blank" rel="noopener" class="content-image">
            <img src="https://assets.st-note.com/production/uploads/images/218091337/rectangle_large_type_2_c56e1758639549e09ea40005c7dbfe8f.png" alt="AIと一緒に作った初めてのホームページ">
          </a>
          <div class="content-info">
            <span class="card-date">note.com</span>
            <h3>AIと一緒に作った初めてのホームページ——還暦からの新しい挑戦</h3>
            <p class="card-excerpt">60歳を迎え、AIの力を借りながら初めてのホームページ制作に挑戦。</p>
            <a href="https://note.com/tojimasaya/n/n188241da2ab6" target="_blank" rel="noopener" class="card-action-btn">Read on note</a>
          </div>
        </article>

        <article class="content-card">
          <a href="https://drone.jp/column/2024052410211888779.html" target="_blank" rel="noopener" class="content-image">
            <img src="https://d2llikhal5te33.cloudfront.net/wpdronenews/wp-content/uploads/2024/05/tohzi_40_01.jpg" alt="中国でドローンを飛ばすために">
          </a>
          <div class="content-info">
            <span class="card-date">DRONE.jp</span>
            <h3>Vol.40 中国でドローンを飛ばすために：UOM登録の手順と注意点</h3>
            <p class="card-excerpt">中国でドローンを飛ばすために必要なUOM登録の具体的な手順と注意点。</p>
            <a href="https://drone.jp/column/2024052410211888779.html" target="_blank" rel="noopener" class="card-action-btn">Read on DRONE.jp</a>
          </div>
        </article>

        <article class="content-card">
          <a href="turkey-travel-journal.html" class="content-image">
            <img src="assets/images/turkey-hero.jpg" alt="トルコ旅行記">
          </a>
          <div class="content-info">
            <span class="card-date">Travel Journal</span>
            <h3>トルコ旅行記：カッパドキアからイスタンブールへ</h3>
            <p class="card-excerpt">熱気球、旋回舞踊、古代遺跡。トルコの多様な表情を巡った9日間。</p>
            <a href="turkey-travel-journal.html" class="card-action-btn">記事を読む</a>
          </div>
        </article>

      </div>
    </section>

    <section class="latest-section latest-new container">
      <h2 class="latest-title">
        What's New
        <span class="jp-subtitle">最新記事</span>
      </h2>
      <div class="articles-grid-3col" id="whats-new-grid">
        <p class="text-center" style="grid-column: 1 / -1; color: var(--text-light);">
            最新の記事を読み込み中です...
        </p>
      </div>
      <div class="text-center" style="margin-top: 40px;">
        <a href="writings.html" class="card-action-btn" style="background: var(--text-light);">すべての記事を見る</a>
      </div>
    </section>

    <section class="latest-section container" style="border-bottom: none;">
      <h2 class="latest-title">
        More Contents
        <span class="jp-subtitle">その他のコンテンツ</span>
      </h2>
      <div class="link-grid">
        <a href="gallery.html" class="link-item">
          <div class="link-title">Gallery</div>
          <p class="link-description">写真ギャラリー</p>
        </a>
        <a href="gear.html" class="link-item">
          <div class="link-title">Gear</div>
          <p class="link-description">使用機材</p>
        </a>
        <a href="https://instagram.com/tojimasaya" target="_blank" rel="noopener" class="link-item">
          <div class="link-title">Instagram</div>
          <p class="link-description">日々のスナップ</p>
        </a>
      </div>
    </section>

  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2024 Toji Masaya. All rights reserved.</p>
    </div>
  </footer>
  
  <script>
    // ヒーロースライダーのJavaScript
    (function() {
      const sliderContainer = document.querySelector('.slider-container');
      if (!sliderContainer) return;

      const slides = Array.from(document.querySelectorAll('.hero-slide'));
      const dots = Array.from(document.querySelectorAll('.hero-dots .dot'));
      let currentSlide = 0;
      let intervalId;
      const slideInterval = 6000; // 6秒（少し長めに）

      function changeSlide(nextIndex) {
        if (nextIndex === currentSlide) return;
        
        const current = slides[currentSlide];
        const next = slides[nextIndex];

        // 現在のスライドをフェードアウト
        current.classList.remove('active');
        
        // 次のスライドをフェードイン
        next.classList.add('active');

        // ドットの更新
        dots[currentSlide].classList.remove('active');
        dots[nextIndex].classList.add('active');

        currentSlide = nextIndex;
      }

      // 自動スライド
      function startAutoSlide() {
        intervalId = setInterval(() => {
          const nextIndex = (currentSlide + 1) % slides.length;
          changeSlide(nextIndex);
        }, slideInterval);
      }

      // ドットクリックイベント
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          clearInterval(intervalId);
          changeSlide(index);
          startAutoSlide();
        });
      });

      // 初期化
      startAutoSlide();

      // ページが非表示になったら自動スライドを停止
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          clearInterval(intervalId);
        } else {
          clearInterval(intervalId);
          startAutoSlide();
        }
      });
    })();

    // ナビゲーション トグル
    document.querySelector('.nav-toggle').addEventListener('click', function() {
      document.querySelector('.nav-menu').classList.toggle('active');
    });

    // スムーズスクロール
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();

            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });

    // External links security
    document.querySelectorAll('a[target="_blank"]').forEach(link => {
        link.rel = 'noopener noreferrer';
    });

    // What's New セクションの記事読み込み
    async function loadWhatsNew() {
      const container = document.getElementById('whats-new-grid');
      
      try {
        // まずwritings-og.jsonを読み込む（画像取得用）
        const ogResponse = await fetch('/data/writings-og.json');
        if (!ogResponse.ok) throw new Error(`HTTP ${ogResponse.status}`);
        const articlesData = await ogResponse.json();
        
        // note記事をRSSから取得（最新2件）
        const noteFeeds = [
          { url: 'https://note.com/tojimasaya/m/m22c44596304b/rss', name: '香港レンズ' },
          { url: 'https://note.com/tojimasaya/m/md99dd54590fa/rss', name: '次はどこへ' },
          { url: 'https://note.com/tojimasaya/m/mcae365b520ed/rss', name: '俺流トラベルガジェット' }
        ];
        
        const noteArticles = [];
        
        // 各フィードから記事を取得
        for (const feed of noteFeeds) {
          try {
            const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(feed.url)}`;
            const response = await fetch(proxyUrl);
            const xmlText = await response.text();
            
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
            
            const items = xmlDoc.querySelectorAll('item');
            items.forEach((item, index) => {
              if (index < 2) {
                const title = item.querySelector('title')?.textContent || '';
                const link = item.querySelector('link')?.textContent || '';
                const description = item.querySelector('description')?.textContent || '';
                const pubDate = item.querySelector('pubDate')?.textContent || '';
                
                const excerpt = description.replace(/<[^>]*>/g, '').substring(0, 60) + '...';
                const date = new Date(pubDate);
                
                // writings-og.jsonから画像を取得
                const ogData = articlesData[link];
                const imageUrl = ogData?.image || 'assets/images/gallery/weekly.jpg';
                
                noteArticles.push({
                  title,
                  link,
                  excerpt,
                  date: date.toISOString(),
                  imageUrl,
                  source: 'note'
                });
              }
            });
          } catch (error) {
            console.error(`RSS取得エラー (${feed.name}):`, error);
          }
        }
        
        // 日付でソートして最新2件を取得
        noteArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
        const latestNoteArticles = noteArticles.slice(0, 2);
        
        // DRONE.jp記事をwritings-og.jsonから取得（最新1件）
        
        const droneArticles = Object.entries(articlesData)
          .filter(([url]) => url.includes('drone.jp/column'))
          .sort((a, b) => {
            const dateA = a[0].match(/(\d{14})/)?.[1] || '0';
            const dateB = b[0].match(/(\d{14})/)?.[1] || '0';
            return dateB.localeCompare(dateA);
          })
          .map(([url, data]) => {
            const dateStr = url.match(/(\d{14})/)?.[1] || '';
            let formattedDate = '';
            if (dateStr.length >= 8) {
              const year = dateStr.substring(0, 4);
              const month = parseInt(dateStr.substring(4, 6), 10);
              const day = parseInt(dateStr.substring(6, 8), 10);
              formattedDate = `${year}年${month}月${day}日`;
            }
            
            return {
              title: data.title || 'DRONE.jp連載記事',
              link: url,
              excerpt: data.description?.substring(0, 60) + '...' || '',
              imageUrl: data.image || 'assets/images/gallery/hongkong.jpg',
              formattedDate,
              source: 'DRONE.jp'
            };
          })
          .slice(0, 1);
        
        // 記事を結合（note2 + drone1）
        const allArticles = [...latestNoteArticles, ...droneArticles];
        
        if (allArticles.length > 0) {
          container.innerHTML = allArticles.map(article => `
            <article class="content-card">
              <a href="${article.link}" target="_blank" rel="noopener" class="content-image">
                <img src="${article.imageUrl}" alt="${article.title}" onerror="this.src='assets/images/gallery/weekly.jpg'">
              </a>
              <div class="content-info">
                <span class="card-date">${article.source}</span>
                <h3>${article.title}</h3>
                <p class="card-excerpt">${article.excerpt}</p>
                <a href="${article.link}" target="_blank" rel="noopener" class="card-action-btn">読む</a>
              </div>
            </article>
          `).join('');
        } else {
          throw new Error('No articles found');
        }
      } catch (error) {
        console.error('What\'s New loading error:', error);
        // エラー時は静的コンテンツを表示
        container.innerHTML = `
          <article class="content-card">
            <a href="https://note.com/tojimasaya" target="_blank" rel="noopener" class="content-image">
              <img src="assets/images/gallery/weekly.jpg" alt="note">
            </a>
            <div class="content-info">
              <span class="card-date">note</span>
              <h3>noteで最新記事を公開中</h3>
              <p class="card-excerpt">旅の記録、機材レビュー、香港での日常を綴っています。</p>
              <a href="https://note.com/tojimasaya" target="_blank" rel="noopener" class="card-action-btn">noteを見る</a>
            </div>
          </article>
          <article class="content-card">
            <a href="https://note.com/tojimasaya" target="_blank" rel="noopener" class="content-image">
              <img src="assets/images/gallery/istanbul.jpg" alt="note">
            </a>
            <div class="content-info">
              <span class="card-date">note</span>
              <h3>香港から世界へ</h3>
              <p class="card-excerpt">香港を拠点に、旅やカメラについて自由に綴っています。</p>
              <a href="https://note.com/tojimasaya" target="_blank" rel="noopener" class="card-action-btn">noteを見る</a>
            </div>
          </article>
          <article class="content-card">
            <a href="https://drone.jp/column/masaya-toji" target="_blank" rel="noopener" class="content-image">
              <img src="assets/images/gallery/hongkong.jpg" alt="DRONE.jp">
            </a>
            <div class="content-info">
              <span class="card-date">DRONE.jp</span>
              <h3>中国・香港ドローン便り</h3>
              <p class="card-excerpt">月1回連載中。空撮ノウハウやドローン旅のレポート。</p>
              <a href="https://drone.jp/column/masaya-toji" target="_blank" rel="noopener" class="card-action-btn">連載を見る</a>
            </div>
          </article>
        `;
      }
    }
    
    // ページ読み込み時に実行
    document.addEventListener('DOMContentLoaded', loadWhatsNew);
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "田路昌也",
    "alternateName": "Toji Masaya",
    "jobTitle": "Writer and Travel Photographer",
    "url": "https://tojimasaya.com",
    "sameAs": [
      "https://note.com/tojimasaya",
      "https://instagram.com/tojimasaya",
      "https://www.drone.jp/"
    ]
  }
  </script>
</body>
</html>
