<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-806426BQX2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-806426BQX2');
  </script>

  <title>Toji Masaya – drone/camera/travel</title>

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <meta name="description" content="田路昌也(TJ)のポートフォリオサイト。ライカやドローンを片手に、旅先の空気や日々の発見を写真と文章で記録しています。">
  <meta name="keywords" content="田路昌也, TJ, 旅行, 写真, ライター, 香港, 姫路城, 白鷺三十六景, 香港ネオン残照, note">
  <meta name="author" content="Toji Masaya">

  <meta property="og:title" content="Toji Masaya – drone/camera/travel">
  <meta property="og:description" content="香港と日本を行き来しながら、旅先で出会った風景や小さな発見を写真と言葉で綴っています。白鷺三十六景・香港ネオン残照、2つのプロジェクトを軸に。">
  <meta property="og:image" content="https://tojimasaya.com/assets/images/gallery/castle31.jpg">
  <meta property="og:url" content="https://tojimasaya.com">
  <meta property="og:type" content="website">

  <!-- フォント読み込みの最適化 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600;700&family=Noto+Serif+JP:wght@300;400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600;700&family=Noto+Serif+JP:wght@300;400;500;600&display=swap" rel="stylesheet"></noscript>

  <link rel="stylesheet" href="style.css">

  <!-- 構造化データ (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Toji Masaya",
    "alternateName": "田路昌也",
    "jobTitle": "Photographer, Writer",
    "url": "https://tojimasaya.com",
    "image": "https://tojimasaya.com/assets/images/about/TJ.jpg",
    "sameAs": [
      "https://instagram.com/tojimasaya",
      "https://note.com/tojimasaya",
      "https://www.youtube.com/TJVlog",
      "https://x.com/mongkok93",
      "https://www.facebook.com/masaya.toji"
    ],
    "description": "香港と日本を行き来する写真家・ライター。Leicaとドローンで旅の断片を記録。白鷺三十六景・香港ネオン残照プロジェクトを進行中。"
  }
  </script>

  <!-- Web Vitals 計測（Lighthouseと同等の指標をGAに送信） -->
  <script>
    function sendToAnalytics(metric) {
      if (typeof gtag !== 'undefined') {
        gtag('event', metric.name, {
          value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
          event_category: 'Web Vitals',
          non_interaction: true
        });
      }
    }
    (function() {
      var s = document.createElement('script');
      s.src = 'https://unpkg.com/web-vitals@3/dist/web-vitals.umd.js';
      s.defer = true;
      s.onload = function() {
        try {
          webVitals.onCLS(sendToAnalytics);
          webVitals.onFID(sendToAnalytics);
          webVitals.onFCP(sendToAnalytics);
          webVitals.onLCP(sendToAnalytics);
          webVitals.onTTFB(sendToAnalytics);
        } catch (e) {
          console.warn('Web Vitals setup failed', e);
        }
      };
      document.head.appendChild(s);
    })();
  </script>

  <style>
    /* ==============================================
       INDEX REDESIGN — Project-First Layout
       ============================================== */

    /* ── Hero: 2-Panel Split ── */
    .hero-redesign {
      position: relative;
      width: 100%;
      height: calc(100vh - 70px);
      min-height: 500px;
      overflow: hidden;
      background: #1a1a1a;
      margin-top: 70px;
    }

    .hero-split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 100%;
    }

    .hero-panel {
      position: relative;
      overflow: hidden;
    }

    .hero-panel a {
      display: block;
      width: 100%;
      height: 100%;
      text-decoration: none;
      color: white;
    }

    .hero-panel-bg {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.8s ease, filter 0.5s ease;
      filter: brightness(0.55);
    }

    .hero-panel:hover .hero-panel-bg {
      transform: scale(1.05);
      filter: brightness(0.72);
    }

    .hero-panel-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 3rem;
      color: white;
      background: linear-gradient(transparent 0%, rgba(0,0,0,0.65) 100%);
      z-index: 2;
    }

    .hero-panel-label {
      font-family: 'Inter', sans-serif;
      font-size: 0.7rem;
      letter-spacing: 0.3em;
      opacity: 0.8;
      margin-bottom: 0.8rem;
      text-transform: uppercase;
    }

    .hero-panel-title {
      font-family: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
      font-size: clamp(1.6rem, 2.8vw, 2.6rem);
      font-weight: 400;
      letter-spacing: 0.1em;
      margin-bottom: 0.8rem;
      line-height: 1.5;
    }

    .hero-panel-sub {
      font-family: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
      font-size: 0.85rem;
      opacity: 0.8;
      letter-spacing: 0.05em;
      line-height: 1.9;
    }

    .hero-panel-arrow {
      display: inline-block;
      margin-top: 1.5rem;
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      letter-spacing: 0.15em;
      opacity: 0;
      transition: opacity 0.4s ease, transform 0.4s ease;
      transform: translateX(-8px);
    }

    .hero-panel:hover .hero-panel-arrow {
      opacity: 0.9;
      transform: translateX(0);
    }

    /* 中央の縦ディバイダー */
    .hero-divider {
      position: absolute;
      top: 15%;
      bottom: 15%;
      left: 50%;
      width: 1px;
      background: rgba(255,255,255,0.2);
      z-index: 10;
      pointer-events: none;
    }

    /* サイト名オーバーレイ */
    .hero-site-name {
      position: absolute;
      top: 2.5rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      color: white;
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      letter-spacing: 0.35em;
      opacity: 0.7;
      pointer-events: none;
    }

    /* ── Intro Statement ── */
    .intro-statement {
      max-width: 700px;
      margin: 0 auto;
      padding: 5rem 2rem;
      text-align: center;
    }

    .intro-statement-text {
      font-family: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
      font-size: 1rem;
      line-height: 2.4;
      color: var(--text-light, #666);
      letter-spacing: 0.05em;
    }

    .intro-byline {
      margin-top: 2rem;
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      color: var(--text-lighter, #999);
      letter-spacing: 0.15em;
    }

    .intro-byline a {
      color: #c49a6c;
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: border-color 0.3s;
    }

    .intro-byline a:hover {
      border-color: #c49a6c;
    }

    /* ── Travels Section ── */
    .travels {
      background: var(--white, #fff);
      padding: 5rem 2rem;
    }

    .travels-inner {
      max-width: 1100px;
      margin: 0 auto;
    }

    .section-header-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 2.5rem;
    }

    .section-title-jp {
      font-family: 'Noto Serif JP', serif;
      font-size: 1.3rem;
      font-weight: 400;
      letter-spacing: 0.15em;
      color: var(--text-color, #333);
    }

    .section-link {
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      color: var(--text-lighter, #999);
      text-decoration: none;
      letter-spacing: 0.1em;
      transition: color 0.3s;
    }

    .section-link:hover {
      color: #c49a6c;
    }

    .travel-grid {
      display: grid;
      grid-template-columns: 1.2fr 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 1.2rem;
    }

    .travel-card {
      position: relative;
      overflow: hidden;
      border-radius: 6px;
    }

    .travel-card a {
      display: block;
      width: 100%;
      height: 100%;
      text-decoration: none;
      color: white;
    }

    .travel-card-featured {
      grid-row: span 2;
    }

    .travel-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .travel-card:hover img {
      transform: scale(1.05);
    }

    .travel-card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1.5rem;
      background: linear-gradient(transparent, rgba(0,0,0,0.7));
      color: white;
      z-index: 2;
    }

    .travel-card-title {
      font-family: 'Noto Serif JP', serif;
      font-size: 1.1rem;
      letter-spacing: 0.08em;
      margin-bottom: 0.3rem;
    }

    .travel-card-meta {
      font-family: 'Inter', sans-serif;
      font-size: 0.75rem;
      opacity: 0.7;
      letter-spacing: 0.1em;
    }

    .travel-card-small {
      height: 200px;
    }

    .travel-card-small .travel-card-overlay {
      padding: 1rem;
    }

    .travel-card-small .travel-card-title {
      font-size: 0.95rem;
    }

    .travel-card-featured {
      min-height: 420px;
    }

    /* ── Latest Articles ── */
    .latest-articles {
      padding: 5rem 2rem;
      max-width: 1100px;
      margin: 0 auto;
    }

    .latest-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.8rem;
    }

    .latest-item {
      background: var(--white, #fff);
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid var(--border-color, #e5e5e5);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .latest-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }

    .latest-item a {
      text-decoration: none;
      color: inherit;
      display: block;
    }

    .latest-thumb {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      display: block;
    }

    .latest-content {
      padding: 1.3rem 1.5rem 1.5rem;
    }

    .latest-source {
      font-family: 'Inter', sans-serif;
      font-size: 0.7rem;
      color: var(--text-lighter, #999);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }

    .latest-item-title {
      font-family: 'Noto Serif JP', serif;
      font-size: 0.95rem;
      letter-spacing: 0.04em;
      line-height: 1.7;
      color: var(--text-color, #333);
    }

    .latest-more-row {
      text-align: center;
      margin-top: 2.5rem;
    }

    .latest-more-btn {
      display: inline-block;
      padding: 0.7rem 2rem;
      border: 1px solid var(--border-color, #e5e5e5);
      border-radius: 4px;
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      letter-spacing: 0.1em;
      color: var(--text-light, #666);
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .latest-more-btn:hover {
      border-color: #c49a6c;
      color: #c49a6c;
    }

    /* ── About Strip ── */
    .about-strip {
      background: #2c2c2c;
      color: white;
      padding: 4rem 2rem;
    }

    .about-inner {
      max-width: 900px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 3rem;
    }

    .about-photo {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }

    .about-text-area {
      flex: 1;
    }

    .about-name {
      font-family: 'Inter', sans-serif;
      font-size: 1.1rem;
      letter-spacing: 0.15em;
      margin-bottom: 0.8rem;
      font-weight: 400;
    }

    .about-bio {
      font-family: 'Noto Serif JP', serif;
      font-size: 0.9rem;
      line-height: 2;
      color: #aaa;
      letter-spacing: 0.03em;
    }

    .about-more {
      display: inline-block;
      margin-top: 1rem;
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      color: #c49a6c;
      text-decoration: none;
      letter-spacing: 0.15em;
      transition: opacity 0.3s;
    }

    .about-more:hover {
      opacity: 0.7;
    }

    /* ── Footer ── */
    .footer-redesign {
      background: #1a1a1a;
      color: white;
      padding: 3rem 2rem;
    }

    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-nav {
      display: flex;
      gap: 2rem;
    }

    .footer-nav a {
      font-family: 'Inter', sans-serif;
      color: #666;
      text-decoration: none;
      font-size: 0.8rem;
      letter-spacing: 0.1em;
      transition: color 0.3s;
    }

    .footer-nav a:hover {
      color: #c49a6c;
    }

    .footer-social {
      display: flex;
      gap: 1.5rem;
    }

    .footer-social a {
      font-family: 'Inter', sans-serif;
      color: #666;
      text-decoration: none;
      font-size: 0.8rem;
      letter-spacing: 0.05em;
      transition: color 0.3s;
    }

    .footer-social a:hover {
      color: #c49a6c;
    }

    .footer-copy {
      font-family: 'Inter', sans-serif;
      font-size: 0.75rem;
      color: #555;
      letter-spacing: 0.1em;
      text-align: center;
      margin-top: 2rem;
    }

    /* ── Responsive ── */
    @media (max-width: 768px) {
      .hero-redesign {
        height: auto;
        min-height: auto;
      }

      .hero-split {
        grid-template-columns: 1fr;
      }

      .hero-panel {
        height: 50vh;
        min-height: 320px;
      }

      .hero-divider {
        display: none;
      }

      .hero-site-name {
        top: 1.5rem;
        font-size: 0.7rem;
      }

      .hero-panel-content {
        padding: 2rem;
      }

      .hero-panel-arrow {
        opacity: 0.8;
        transform: translateX(0);
      }

      .intro-statement {
        padding: 3.5rem 1.5rem;
      }

      .travels {
        padding: 3.5rem 1.5rem;
      }

      .travel-grid {
        grid-template-columns: 1fr;
        grid-template-rows: auto;
      }

      .travel-card-featured {
        grid-row: span 1;
        min-height: 260px;
      }

      .travel-card-small {
        height: 180px;
      }

      .latest-articles {
        padding: 3.5rem 1.5rem;
      }

      .latest-grid {
        grid-template-columns: 1fr;
        gap: 1.2rem;
      }

      .about-strip {
        padding: 3rem 1.5rem;
      }

      .about-inner {
        flex-direction: column;
        text-align: center;
      }

      .footer-inner {
        flex-direction: column;
        gap: 1.5rem;
        text-align: center;
      }

      .footer-nav {
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
      }

      .footer-social {
        flex-wrap: wrap;
        justify-content: center;
      }
    }

    @media (max-width: 1000px) and (min-width: 769px) {
      .travel-grid {
        grid-template-columns: 1fr 1fr;
      }

      .travel-card-featured {
        grid-column: span 2;
        grid-row: span 1;
        min-height: 300px;
      }

      .latest-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* ── Video Modal (既存の動画再生機能) ── */
    .modal-video {
      position: relative;
      width: 90%;
      max-width: 900px;
      aspect-ratio: 16 / 9;
    }

    .modal-video iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
<link rel="canonical" href="https://tojimasaya.com/">
</head>
<body>

  <!-- 共通ヘッダーの読み込み -->
  <script src="js/site-header.js"></script>
  <!-- 画像エラーハンドリング -->
  <script src="js/image-fallback.js"></script>

  <!-- ======================================
       SECTION 1: ヒーロー（左右分割）
       ====================================== -->
  <section class="hero-redesign">
    <div class="hero-site-name">TOJIMASAYA.COM</div>
    <div class="hero-divider"></div>
    <div class="hero-split">

      <!-- 左パネル: 白鷺三十六景 -->
      <div class="hero-panel">
        <a href="shirasagi36.html">
          <img class="hero-panel-bg" src="assets/images/gallery/castle31.jpg" alt="白鷺三十六景 — 姫路城" loading="eager">
          <div class="hero-panel-content">
            <p class="hero-panel-label">Photography Project</p>
            <h2 class="hero-panel-title">白鷺三十六景</h2>
            <p class="hero-panel-sub">姫路城を36の視点から。<br>北斎に着想を得た、四季の記録。</p>
            <span class="hero-panel-arrow">プロジェクトを見る →</span>
          </div>
        </a>
      </div>

      <!-- 右パネル: 香港ネオン残照 -->
      <div class="hero-panel">
        <a href="hongkong-neon.html">
          <img class="hero-panel-bg" src="assets/images/hongkong-neon/01.jpg" alt="香港ネオン残照" loading="eager">
          <div class="hero-panel-content">
            <p class="hero-panel-label">Documentation Project</p>
            <h2 class="hero-panel-title">香港ネオン残照</h2>
            <p class="hero-panel-sub">消えゆくネオンの光を追いかけて。<br>変わりゆく街の記憶を記録する。</p>
            <span class="hero-panel-arrow">プロジェクトを見る →</span>
          </div>
        </a>
      </div>

    </div>
  </section>

  <!-- ======================================
       SECTION 2: ステートメント
       ====================================== -->
  <section class="intro-statement">
    <p class="intro-statement-text">
      Leicaとドローンを携え、香港と日本を行き来しながら<br>
      消えゆくもの、変わらないものを記録しています。
    </p>
    <p class="intro-byline">
      写真と文章 — <a href="about.html">Toji Masaya</a>
    </p>
  </section>

  <!-- ======================================
       SECTION 3: 旅の記録
       ====================================== -->
  <section class="travels">
    <div class="travels-inner">
      <div class="section-header-row">
        <h2 class="section-title-jp">旅の記録</h2>
        <!-- <a href="trips.html" class="section-link">すべての旅を見る →</a> -->
      </div>
      <div class="travel-grid">

        <!-- 大カード: トルコ旅行記 -->
        <div class="travel-card travel-card-featured">
          <a href="turkey-travel-journal.html">
            <img src="assets/images/turkey-hero.jpg" alt="トルコ旅行記" loading="lazy" decoding="async">
            <div class="travel-card-overlay">
              <h3 class="travel-card-title">トルコ旅行記</h3>
              <p class="travel-card-meta">2024.10 — 9日間・6都市</p>
            </div>
          </a>
        </div>

        <!-- 小カード: チベット・ラサ -->
        <div class="travel-card travel-card-small">
          <a href="https://note.com/tojimasaya/n/n9e58036e3b01" target="_blank" rel="noopener noreferrer">
            <img src="assets/images/gallery/lhasa.jpg" alt="チベット・ラサ" loading="lazy" decoding="async">
            <div class="travel-card-overlay">
              <h3 class="travel-card-title">チベット・ラサ</h3>
              <p class="travel-card-meta">note</p>
            </div>
          </a>
        </div>

        <!-- 小カード: プラハ -->
        <div class="travel-card travel-card-small">
          <a href="https://note.com/tojimasaya/n/n58be6060ac3b" target="_blank" rel="noopener noreferrer">
            <img src="assets/images/gallery/charlesbridge.jpg" alt="プラハ、早朝のカレル橋にて" loading="lazy" decoding="async">
            <div class="travel-card-overlay">
              <h3 class="travel-card-title">プラハ、早朝のカレル橋にて</h3>
              <p class="travel-card-meta">note</p>
            </div>
          </a>
        </div>

        <!-- 小カード: ホーチミン -->
        <div class="travel-card travel-card-small">
          <a href="https://note.com/tojimasaya/n/neef174955de1" target="_blank" rel="noopener noreferrer">
            <img src="assets/images/gallery/vietnam.jpg" alt="ホーチミン" loading="lazy" decoding="async">
            <div class="travel-card-overlay">
              <h3 class="travel-card-title">7年ぶりのホーチミン</h3>
              <p class="travel-card-meta">note</p>
            </div>
          </a>
        </div>

        <!-- 小カード: 水の都 ベネツィアの魅力 -->
        <div class="travel-card travel-card-small">
          <a href="https://note.com/tojimasaya/n/n0f144e8e5d8f" target="_blank" rel="noopener noreferrer">
            <img src="assets/images/gallery/venice.jpg" alt="水の都 ベネツィアの魅力" loading="lazy" decoding="async">
            <div class="travel-card-overlay">
              <h3 class="travel-card-title">水の都 ベネツィアの魅力</h3>
              <p class="travel-card-meta">note</p>
            </div>
          </a>
        </div>

      </div>
    </div>
  </section>

  <!-- ======================================
       SECTION 4: 最新の記事（RSS連携）
       ====================================== -->
  <section class="latest-articles">
    <div class="section-header-row">
      <h2 class="section-title-jp">最新の記事</h2>
      <a href="writings.html" class="section-link">すべての記事 →</a>
    </div>
    <div class="latest-grid" id="latest-grid">
      <p style="grid-column: 1 / -1; text-align: center; color: var(--text-lighter, #999); font-size: 0.9rem;">
        最新の記事を読み込み中...
      </p>
    </div>
    <div class="latest-more-row">
      <a href="writings.html" class="latest-more-btn">すべての記事を見る</a>
    </div>
  </section>

  <!-- ======================================
       SECTION 5: About Strip
       ====================================== -->
  <section class="about-strip">
    <div class="about-inner">
              <img class="about-photo" src="assets/images/about/TJ.jpg" alt="Toji Masaya" loading="lazy" decoding="async">
      <div class="about-text-area">
        <h2 class="about-name">Toji Masaya</h2>
        <p class="about-bio">
          還暦からの二拠点ライフ。香港と日本、ときどき旅。<br>
          Leicaの静止画とドローンの俯瞰。<br>
          二つの視点から記録する、私だけの旅の断片。
        </p>
        <a href="about.html" class="about-more">プロフィールを見る →</a>
      </div>
    </div>
  </section>

  <!-- ======================================
       FOOTER
       ====================================== -->
  <footer class="footer-redesign">
    <div class="footer-inner">
      <nav class="footer-nav">
        <a href="gallery.html">Gallery</a>
        <a href="gear.html">Gear</a>
        <a href="writings.html">Writings</a>
        <!-- <a href="trips.html">Trips</a> -->
        <a href="about.html">About</a>
      </nav>
      <div class="footer-social">
        <a href="https://instagram.com/tojimasaya" target="_blank" rel="noopener noreferrer">Instagram</a>
        <a href="https://note.com/tojimasaya" target="_blank" rel="noopener noreferrer">note</a>
        <a href="https://www.youtube.com/TJVlog" target="_blank" rel="noopener noreferrer">YouTube</a>
        <a href="https://x.com/mongkok93" target="_blank" rel="noopener noreferrer">X</a>
        <a href="https://www.facebook.com/masaya.toji" target="_blank" rel="noopener noreferrer">Facebook</a>
      </div>
    </div>
    <p class="footer-copy">&copy; <script>document.write(new Date().getFullYear())</script> Toji Masaya</p>
  </footer>

  <script>
    // ===== 最新記事の読み込み（articles.json） =====
    async function loadLatestArticles() {
      const container = document.getElementById('latest-grid');

      try {
        const res = await fetch('/data/articles.json');
        if (!res.ok) throw new Error('Failed to load articles.json');
        const articles = await res.json();

        // 日付降順でソート済み、最新3件を取得
        const allArticles = articles.slice(0, 3).map(a => ({
          title: a.title,
          link: a.link,
          imageUrl: a.image || 'assets/images/gallery/weekly.jpg',
          source: a.sourceLabel || a.source
        }));

        if (allArticles.length > 0) {
          container.innerHTML = allArticles.map(article => `
            <article class="latest-item">
              <a href="${article.link}" target="_blank" rel="noopener noreferrer">
                <img class="latest-thumb" src="${article.imageUrl}" alt="${article.title}" loading="lazy" decoding="async" onerror="this.src='assets/images/gallery/weekly.jpg'">
                <div class="latest-content">
                  <p class="latest-source">${article.source}</p>
                  <h3 class="latest-item-title">${article.title}</h3>
                </div>
              </a>
            </article>
          `).join('');
        } else {
          throw new Error('No articles');
        }
      } catch (error) {
        console.log('Using static content for latest articles');
        container.innerHTML = `
          <article class="latest-item">
            <a href="https://note.com/tojimasaya" target="_blank" rel="noopener">
              <img class="latest-thumb" src="assets/images/gallery/weekly.jpg" alt="note" loading="lazy">
              <div class="latest-content">
                <p class="latest-source">note</p>
                <h3 class="latest-item-title">最新記事をチェック</h3>
              </div>
            </a>
          </article>
          <article class="latest-item">
            <a href="https://drone.jp/column/masaya-toji" target="_blank" rel="noopener">
              <img class="latest-thumb" src="assets/images/gallery/hongkong.jpg" alt="DRONE.jp" loading="lazy">
              <div class="latest-content">
                <p class="latest-source">DRONE.jp</p>
                <h3 class="latest-item-title">ドローン連載</h3>
              </div>
            </a>
          </article>
          <article class="latest-item">
            <a href="writings.html">
              <img class="latest-thumb" src="assets/images/gallery/monthly.jpg" alt="Writings" loading="lazy">
              <div class="latest-content">
                <p class="latest-source">Writings</p>
                <h3 class="latest-item-title">執筆記事一覧</h3>
              </div>
            </a>
          </article>
        `;
      }
    }

    document.addEventListener('DOMContentLoaded', loadLatestArticles);

    // ===== External links =====
    document.querySelectorAll('a[target="_blank"]').forEach(link => {
      link.rel = 'noopener noreferrer';
    });

    // ===== Video Modal（将来の動画埋め込み用） =====
    function openVideo(youtubeId, title) {
      const html = `
        <div class="modal" id="videoModal" style="display:flex;" onclick="closeVideo()">
          <button class="close-modal" onclick="closeVideo()">×</button>
          <div class="modal-video" onclick="event.stopPropagation()">
            <iframe src="https://www.youtube.com/embed/${youtubeId}?autoplay=1&rel=0" title="${title}" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe>
          </div>
        </div>`;
      document.body.insertAdjacentHTML('beforeend', html);
      document.body.style.overflow = 'hidden';
    }

    function closeVideo() {
      const modal = document.getElementById('videoModal');
      if (modal) modal.remove();
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeVideo();
    });
  </script>
</body>
</html>
