<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>From Instagram — Toji Masaya</title>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- SEO -->
  <meta name="description" content="Instagramから来てくれた方へ。最新の写真、記事、ギアをまとめました。">
  <meta name="keywords" content="Toji Masaya, 田路昌也, Instagram, 写真, 旅, ガジェット">
  <meta name="author" content="Toji Masaya">

  <!-- OGP -->
  <meta property="og:title" content="From Instagram — Toji Masaya">
  <meta property="og:description" content="Instagramから来てくれた方へ。最新の写真、記事、ギアをまとめました。">
  <meta property="og:image" content="https://tojimasaya.com/assets/images/gallery/tonomine-susuki.jpg">
  <meta property="og:url" content="https://tojimasaya.com/insta.html">
  <meta property="og:type" content="website">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Theme -->
  <meta name="theme-color" content="#fafafa">
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)">
</head>

<body>
  <a href="#main-content" class="skip-link">メインコンテンツにスキップ</a>

  <!-- Navigation (minimal) -->
  <nav class="main-nav" id="main-nav">
    <div class="nav-container">
      <a href="/" class="nav-logo">TJM</a>
      <ul class="nav-menu" id="nav-menu">
        <li><a href="/" class="nav-link">Home</a></li>
        <li><a href="/gallery.html" class="nav-link">Gallery</a></li>
        <li><a href="/gear.html" class="nav-link">Gear</a></li>
        <li><a href="/writings.html" class="nav-link">Writings</a></li>
      </ul>
      <button class="nav-toggle" id="nav-toggle" aria-label="メニューを開く">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <!-- Hero -->
  <section class="gallery-hero" role="banner">
    <div class="gallery-hero-image">
      <img src="assets/images/gallery/tonomine-susuki.jpg"
           alt="From Instagram — 砥峰高原のススキ原"
           loading="eager" width="1920" height="1080">
      <div class="gallery-hero-overlay">
        <h1 class="gallery-hero-title">From Instagram</h1>
        <p class="gallery-hero-subtitle">ようこそ。ここから深掘りできます</p>
      </div>
    </div>
  </section>

  <main id="main-content" class="main-content">
    <div class="container">

      <!-- Intro -->
      <section class="gallery-intro">
        <div class="intro-text">
          <p class="lead">
            Instagramの投稿から来てくださってありがとうございます。<br>
            下の3つのカードから、<strong>最新の写真</strong>・<strong>最新記事</strong>・<strong>使用ギア</strong>にすぐアクセスできます。
          </p>
        </div>
      </section>

      <!-- Cards -->
      <section class="content-grid">
        <!-- Latest Photo (links to Gallery) -->
        <article class="content-card">
          <div class="content-image">
            <a href="/gallery.html?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing">
              <img src="assets/images/gallery/hongkong.jpg"
                   alt="最新の写真 — Galleryへ" loading="lazy" width="400" height="250">
            </a>
          </div>
          <div class="content-info">
            <span class="content-category">Gallery</span>
            <h3><a href="/gallery.html?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing">最新の写真を見る</a></h3>
            <p>旅先の空気と光を、写真と短い言葉で綴っています。まずはギャラリーから。</p>
          </div>
        </article>

        <!-- Latest Writing (auto from note RSS) -->
        <article class="content-card">
          <div class="content-image">
            <a id="latest-article-link" href="/writings.html?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing">
              <img src="assets/images/gear/oreryu.jpg"
                   alt="最新記事 — Writingsへ" loading="lazy" width="400" height="250">
            </a>
          </div>
          <div class="content-info">
            <span class="content-category">Writings</span>
            <h3 id="latest-article-title">
              <a href="/writings.html?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing">
                最新記事を読む
              </a>
            </h3>
            <p id="latest-article-meta">noteとDRONE.jpの最新記事をまとめています。</p>
          </div>
        </article>

        <!-- Gear Entry -->
        <article class="content-card large">
          <div class="content-image">
            <a href="/gear.html?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing">
              <img src="assets/images/gear/drone.jpg"
                   alt="使用機材 — Gearへ" loading="lazy" width="600" height="400">
            </a>
          </div>
          <div class="content-info">
            <span class="content-category">Gear</span>
            <h2><a href="/gear.html?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing">使用機材（Gear）</a></h2>
            <p>Leica、DJI、スマホ、Daily Drivers。撮る・書く・編集する道具たちをまとめました。</p>
            <div class="latest-preview">
              <h4>ショートカット</h4>
              <div class="preview-item">
                <div class="preview-title"><a href="/gear-drone.html?utm_source=instagram">Drone</a></div>
                <p class="preview-excerpt">DJI Miniシリーズを中心に旅撮影に最適化。</p>
              </div>
              <div class="preview-item">
                <div class="preview-title"><a href="/gear-editing.html?utm_source=instagram">Daily Drivers</a></div>
                <p class="preview-excerpt">毎日使うスマホ／PC／編集環境。</p>
              </div>
              <div class="preview-item">
                <div class="preview-title"><a href="/gear-camera.html?utm_source=instagram">Camera</a></div>
                <p class="preview-excerpt">Leicaとレンズの記録。</p>
              </div>
            </div>
            <a href="/gear.html?utm_source=instagram" class="card-action-btn">View All Gear →</a>
          </div>
        </article>
      </section>

      <!-- Back -->
      <section class="back-to-home">
        <a href="/" class="back-link"><span class="back-arrow">←</span><span>Back to Home</span></a>
      </section>

      <!-- Footer -->
      <footer class="footer" role="contentinfo">
        <div class="footer-content">
          <p>&copy; 2025 Toji Masaya. All rights reserved.</p>
          <p>Built with care in Japan</p>
        </div>
      </footer>
    </div>
  </main>

  <!-- Scripts -->
  <script>
    // Navigation
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    if (navToggle && navMenu) {
      navToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
        navToggle.classList.toggle('active');
        document.body.classList.toggle('nav-open');
      });
    }
    window.addEventListener('scroll', () => {
      const nav = document.getElementById('main-nav');
      if (window.scrollY > 50) nav.classList.add('scrolled');
      else nav.classList.remove('scrolled');
    });

    // Fetch latest note article (same approach as writings.html)
    async function setLatestArticle() {
      try {
        const feeds = [
          'https://note.com/tojimasaya/m/m22c44596304b/rss', // 香港レンズ
          'https://note.com/tojimasaya/m/md99dd54590fa/rss', // 次はどこへ
          'https://note.com/tojimasaya/m/mcae365b520ed/rss'  // 俺流トラベルガジェット
        ];
        const all = [];
        for (const url of feeds) {
          try {
            const proxy = `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;
            const res = await fetch(proxy);
            const xml = await res.text();
            const doc = new DOMParser().parseFromString(xml, 'text/xml');
            const items = Array.from(doc.querySelectorAll('item')).slice(0, 2);
            items.forEach(it => {
              const title = it.querySelector('title')?.textContent || '';
              const link = it.querySelector('link')?.textContent || '';
              const pubDate = it.querySelector('pubDate')?.textContent || '';
              const date = new Date(pubDate);
              all.push({title, link, date});
            });
          } catch (e) { /* ignore feed error */ }
        }
        if (all.length) {
          all.sort((a,b) => b.date - a.date);
          const latest = all[0];
          const titleEl = document.getElementById('latest-article-title');
          const linkEl = document.getElementById('latest-article-link');
          const metaEl = document.getElementById('latest-article-meta');
          const d = latest.date.toLocaleDateString('ja-JP',{year:'numeric',month:'long',day:'numeric'});
          titleEl.innerHTML = `<a href="${latest.link}?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing" target="_blank" rel="noopener noreferrer">${latest.title}</a>`;
          linkEl.href = `${latest.link}?utm_source=instagram&utm_medium=profile_link&utm_campaign=insta_landing`;
          metaEl.textContent = `最新：${d}`;
        }
      } catch (e) {
        // noop (fallback texts remain)
      }
    }
    document.addEventListener('DOMContentLoaded', setLatestArticle);

    // Secure external links
    document.querySelectorAll('a[target="_blank"]').forEach(link => { link.rel = 'noopener noreferrer'; });
  </script>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "From Instagram — Toji Masaya",
    "description": "Instagramから来た方のためのランディングページ。最新の写真・記事・ギアへ。",
    "url": "https://tojimasaya.com/insta.html",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Toji Masaya",
      "url": "https://tojimasaya.com"
    }
  }
  </script>
</body>
</html>
