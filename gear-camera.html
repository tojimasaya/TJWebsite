<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Camera & Lenses — Toji Masaya</title>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- SEO -->
  <meta name="description" content="田路昌也が使用しているカメラ機材。Leica M10、SL2-S、M2のボディと、Summiluxなどのレンズコレクション。">
  <meta name="keywords" content="田路昌也, カメラ, Leica, M10, SL2-S, M2, Summilux, レンズ, レビュー">
  <meta name="author" content="Toji Masaya">

  <!-- OGP -->
  <meta property="og:title" content="Camera Gear — Toji Masaya">
  <meta property="og:description" content="LeicaとFujifilmを中心としたカメラ機材">
  <meta property="og:image" content="https://tojimasaya.com/assets/images/gear/m2.jpg">
  <meta property="og:url" content="https://tojimasaya.com/gear-camera.html">
  <meta property="og:type" content="website">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- CSS（キャッシュバスター付き） -->
  <link rel="stylesheet" href="style.css?v=20251016">

  <!-- Theme -->
  <meta name="theme-color" content="#fafafa">
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)">
  <style>
    /* このページ固有の最小スタイル（全体CSSに既にあれば不要） */
    .gear-section-title{
      font-size:1.8rem; font-weight:500; margin:60px 0 24px; text-align:center; 
      letter-spacing:0.1em; color:var(--text-color);
    }
    .gear-section-title:first-of-type{ margin-top:40px; }
    .gear-filter-tabs{
      display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin:0 0 24px;
    }
    .gear-filter-tabs button{
      padding:8px 16px; border:1px solid var(--border-color); background:var(--bg-color);
      color:var(--text-color); border-radius:999px; cursor:pointer; white-space:nowrap;
      transition:all .2s ease;
    }
    .gear-filter-tabs button.active{ background:var(--accent-color); color:#fff; border-color:var(--accent-color); }
    @media (max-width:768px){
      .gear-filter-tabs{ flex-wrap:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch; justify-content:flex-start; padding:0 12px; margin:0 -12px 24px; }
    }
    /* PCは2カラム */
    .gear-detail-grid{ display:grid; grid-template-columns:1fr; gap:40px; margin-top:24px; }
    @media (min-width:768px){ .gear-detail-grid{ grid-template-columns:repeat(2,1fr); gap:48px; } }
    /* 画像高さを揃える */
    .gear-detail-image{ height:260px; overflow:hidden; border-radius:12px; }
    .gear-detail-image img{ width:100%; height:100%; object-fit:cover; display:block; }
    @media (max-width:767px){ .gear-detail-image{ height:auto; } .gear-detail-image img{ height:auto; } }
  
    /* Lenses grid & cards */
    .gear-grid{
      display:grid;
      gap:1rem;
    }
    @media (min-width:768px){
      .gear-grid{
        grid-template-columns:repeat(2,minmax(0,1fr));
      }
    }
    .lens-card{
      display:flex;
      gap:1rem;
      border:1px solid var(--border-color);
      border-radius:12px;
      padding:0.75rem;
      background:var(--bg-color);
    }
    @media (max-width:640px){
      .lens-card{
        flex-direction:column;
      }
    }
    .lens-card-image{
      position:relative;
      flex:0 0 40%;
      max-width:180px;
      overflow:hidden;
      border-radius:8px;
    }
    .lens-card-image img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .lens-status-badge{
      position:absolute;
      left:8px;
      top:8px;
      padding:0.1rem 0.5rem;
      border-radius:999px;
      font-size:0.7rem;
      border:1px solid var(--border-color);
      background:rgba(0,0,0,0.6);
      color:#fff;
    }
    .lens-card-body{
      flex:1 1 auto;
      display:flex;
      flex-direction:column;
      gap:0.25rem;
    }
    .lens-card-title{
      font-size:1rem;
      margin:0;
    }
    .lens-card-brand{
      font-size:0.85rem;
      color:var(--muted-text-color, #666);
      margin:0;
    }
    .lens-headline-spec{
      font-size:0.9rem;
      font-weight:600;
      margin:0.1rem 0;
    }
    .lens-description{
      font-size:0.9rem;
      line-height:1.6;
      margin:0.1rem 0;
    }
    .lens-spec-tags{
      display:flex;
      flex-wrap:wrap;
      gap:0.25rem;
      list-style:none;
      margin:0.1rem 0;
      padding:0;
    }
    .lens-spec-tags li{
      font-size:0.75rem;
      padding:0.1rem 0.5rem;
      border-radius:999px;
      background:var(--chip-bg-color,#f5f5f5);
    }
    .lens-comment{
      font-size:0.8rem;
      color:var(--muted-text-color,#555);
      margin:0.2rem 0 0;
    }
    .lens-comment-label{
      font-weight:600;
      margin-right:0.25rem;
    }
    .lens-links a{
      font-size:0.8rem;
      text-decoration:underline;
      margin-right:0.5rem;
    }
</style>
</head>

<body>
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">メインコンテンツにスキップ</a>

  <!-- Navigation -->
  <nav class="main-nav" id="main-nav">
    <div class="nav-container">
      <a href="/" class="nav-logo">Toji Masaya</a>
      <ul class="nav-menu" id="nav-menu">
        <li><a href="/" class="nav-link">Home</a></li>
        <li><a href="/gallery.html" class="nav-link">Gallery</a></li>
        <li><a href="/gear.html" class="nav-link active">Gear</a></li>
        <li><a href="/writings.html" class="nav-link">Writings</a></li>
      </ul>
      <button class="nav-toggle" id="nav-toggle" aria-label="メニューを開く">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="gear-hero" role="banner">
    <div class="gear-hero-image">
      <img src="assets/images/gear/m2.jpg" alt="Camera Equipment" loading="eager" width="1920" height="1080">
      <div class="gear-hero-overlay">
        <h1 class="gear-hero-title">Camera</h1>
        <p class="gear-hero-subtitle">ボディ／レンズ</p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main id="main-content" class="main-content">
    <div class="container">

      <!-- Introduction -->
      <section class="gear-intro">
        <p class="lead">撮影旅行に持っていきやすい機材群。Leicaを中心に運用しています。</p>
      </section>

      <!-- Camera Bodies Section -->
      <section class="gear-section">
        <h2 class="gear-section-title">Camera Bodies</h2>
        <div class="gear-detail-grid" id="camera-bodies-grid">
          <div class="loading">カメラボディを読み込み中...</div>
        </div>
      </section>

      <!-- Lenses Section -->
      <section class="gear-section">
        <h2 class="gear-section-title">Lenses</h2>

        <!-- Lens Filters -->
        <div aria-label="レンズフィルタ">
          <div class="gear-filter-tabs" id="lens-filters">
            <button class="active" data-filter="all">All</button>
            <button data-filter="available">運用中</button>
            <button data-filter="considering">検討中</button>
            <button data-filter="sold">売却済</button>
          </div>
        </div>

        <div id="lens-list" class="gear-grid">
          <div class="loading">レンズを読み込み中...</div>
        </div>
      </section>

      <!-- Back to Gear -->
      <section class=back-to-home">
        <a href="/gear.html" class="back-link"><span class="back-arrow">←</span><span>Back to Gear</span></a>
      </section>

      <!-- Footer -->
      <footer class="footer" role="contentinfo">
        <div class="footer-content">
          <p>&copy; 2025 Toji Masaya. All rights reserved.</p>
          <p>Built with care in Japan</p>
        </div>
      </footer>

    </div>
  </main>

  <!-- Scripts -->
  <script>
    // Navigation
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    if (navToggle && navMenu) {
      navToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
        navToggle.classList.toggle('active');
        document.body.classList.toggle('nav-open');
      });
    }
    window.addEventListener('scroll', () => {
      const nav = document.getElementById('main-nav');
      if (window.scrollY > 50) nav.classList.add('scrolled'); else nav.classList.remove('scrolled');
    });

    
    // ===== Cameras & Lenses rendering + filtering =====
    let ALL_CAMERA_ITEMS = [];
    let CAMERA_BODIES = [];
    let LENSES = [];

    function getStatusText(status){
      const m = {
        'available': '運用中',
        'considering': '検討中',
        'sold': '売却済'
      };
      return m[status] || status;
    }

    function getLinkText(key){
      const m = { review:'レビュー', purchase:'購入リンク', official:'公式サイト' };
      return m[key] || key;
    }

    // --- Camera bodies (従来レイアウトのまま) ---
    function renderCameraBodies(items){
      const grid = document.getElementById('camera-bodies-grid');
      if(!grid){
        return;
      }
      if(!items || items.length === 0){
        grid.innerHTML = '<p class="loading">カメラボディがありません。</p>';
        return;
      }
      grid.innerHTML = items.map(item => `
        <article class="gear-detail-item">
          <div class="gear-detail-image">
            <img src="${item.image}" alt="${item.name}" loading="lazy">
          </div>
          <div class="gear-detail-info">
            <div class="gear-detail-header">
              ${item.status ? `<span class="gear-status-badge ${item.status}">${getStatusText(item.status)}</span>` : ''}
              <div class="gear-detail-brand">${item.brand ?? ''}</div>
              <h2 class="gear-detail-name">${item.name}</h2>
            </div>
            ${item.specs?.length ? `<div class="gear-detail-specs">${
              item.specs.map(s=>`<span class="gear-spec-tag">${s}</span>`).join('')
            }</div>`:''}
            ${item.description ? `<p class="gear-detail-description">${item.description}</p>`:''}
            ${item.comment ? `<div class="gear-detail-comment">${item.comment}</div>`:''}
            ${item.links && Object.keys(item.links).length ? `
              <div class="gear-detail-links">
                ${Object.entries(item.links).map(([k,u]) => `<a href="${u}" target="_blank" rel="noopener noreferrer">${getLinkText(k)}</a>`).join('')}
              </div>` : '' }
          </div>
        </article>
      `).join('');
    }

    // --- Lenses: カードレイアウト＋フィルタ ---
    function createLensCard(item){
      const statusText  = item.status ? getStatusText(item.status) : '';
      const statusClass = item.status ? `lens-status-${item.status}` : '';

      const specs = Array.isArray(item.specs) ? item.specs : [];
      const headlineSpec = specs.length > 0 ? specs[0] : '';
      const extraSpecs   = specs.length > 1 ? specs.slice(1) : [];

      const brandMount = [
        item.brand || '',
        item.mount ? item.mount + 'マウント' : ''
      ].filter(Boolean).join(' / ');

      const wrapper = document.createElement('article');
      wrapper.className = `lens-card ${statusClass}`;
      wrapper.dataset.status = item.status || '';

      wrapper.innerHTML = `
        <div class="lens-card-image">
          <img src="${item.image}" alt="${item.name}" loading="lazy">
          ${statusText ? `<span class="lens-status-badge">${statusText}</span>` : ''}
        </div>
        <div class="lens-card-body">
          <header class="lens-card-header">
            <h3 class="lens-card-title">${item.name}</h3>
          </header>

          ${brandMount ? `<p class="lens-card-brand">${brandMount}</p>` : ''}

          ${headlineSpec ? `<p class="lens-headline-spec">${headlineSpec}</p>` : ''}

          ${item.description ? `
            <p class="lens-description">
              ${item.description}
            </p>
          ` : ''}

          ${extraSpecs.length ? `
            <ul class="lens-spec-tags">
              ${extraSpecs.map(s => `<li>${s}</li>`).join('')}
            </ul>
          ` : ''}

          ${item.comment ? `
            <p class="lens-comment">
              <span class="lens-comment-label">Note</span>
              ${item.comment}
            </p>
          ` : ''}

          ${item.links && Object.keys(item.links).length ? `
            <p class="lens-links">
              ${Object.entries(item.links).map(([k,u]) =>
                `<a href="${u}" target="_blank" rel="noopener noreferrer">${getLinkText(k)}</a>`
              ).join('')}
            </p>
          ` : ''}
        </div>
      `;
      return wrapper;
    }

    function renderLensesList(items){
      const list = document.getElementById('lens-list');
      if(!list) return;

      if(!items || items.length === 0){
        list.innerHTML = '<p class="loading">該当するレンズがありません。</p>';
        return;
      }

      list.innerHTML = '';
      items.forEach(item => {
        list.appendChild(createLensCard(item));
      });
    }

    function applyLensFilter(key){
      let shown = LENSES;
      if(key && key !== 'all'){
        shown = LENSES.filter(it => (it.status || '') === key);
      }
      renderLensesList(shown);
    }

    function setupLensFilters(){
      const container = document.getElementById('lens-filters');
      if(!container) return;

      container.addEventListener('click', (e)=>{
        const btn = e.target.closest('button[data-filter]');
        if(!btn) return;
        container.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        applyLensFilter(btn.dataset.filter || 'all');
      });
    }

    async function loadGear(){
      try{
        const res = await fetch('/data/gear.json');
        const data = await res.json();

        // 全カメラアイテムを取得
        ALL_CAMERA_ITEMS = data?.categories?.camera?.items || [];

        // typeで分類
        CAMERA_BODIES = ALL_CAMERA_ITEMS.filter(item => item.type === 'body');
        LENSES        = ALL_CAMERA_ITEMS.filter(item => item.type === 'lens');

        // カメラボディを描画
        renderCameraBodies(CAMERA_BODIES);

        // レンズを描画（フィルター付き）
        setupLensFilters();
        applyLensFilter('all');

      }catch(err){
        console.error('機材データの読み込みエラー:', err);
        const bodyGrid = document.getElementById('camera-bodies-grid');
        const lensList = document.getElementById('lens-list');
        if(bodyGrid){
          bodyGrid.innerHTML = '<p class="loading">カメラボディの読み込みに失敗しました。</p>';
        }
        if(lensList){
          lensList.innerHTML = '<p class="loading">レンズの読み込みに失敗しました。</p>';
        }
      }
    }

    document.addEventListener('DOMContentLoaded', loadGear);
</script>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Camera & Lenses — Toji Masaya",
    "description": "田路昌也が使用しているカメラボディとLeica Mマウントレンズ",
    "author": { "@type": "Person", "name": "田路昌也", "alternateName": "Toji Masaya" },
    "url": "https://tojimasaya.com/gear-camera.html"
  }
  </script>
</body>
</html>
