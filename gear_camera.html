<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Camera Gear — Toji Masaya</title>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- SEO -->
  <meta name="description" content="田路昌也が使用しているカメラ機材。Leica M10、SL2-S、M2などのボディとレンズ。">
  <meta name="keywords" content="田路昌也, カメラ, Leica, M10, SL2-S, レビュー">
  <meta name="author" content="Toji Masaya">

  <!-- OGP -->
  <meta property="og:title" content="Camera Gear — Toji Masaya">
  <meta property="og:description" content="LeicaとFujifilmを中心としたカメラ機材">
  <meta property="og:image" content="https://tojimasaya.com/assets/images/gear/m2.jpg">
  <meta property="og:url" content="https://tojimasaya.com/gear-camera.html">
  <meta property="og:type" content="website">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- CSS（キャッシュバスター付き） -->
  <link rel="stylesheet" href="style.css?v=20251016">

  <!-- Theme -->
  <meta name="theme-color" content="#fafafa">
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)">
  <style>
    /* このページ固有の最小スタイル（全体CSSに既にあれば不要） */
    .gear-filter-tabs{
      display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin:0 0 24px;
    }
    .gear-filter-tabs button{
      padding:8px 16px; border:1px solid var(--border-color); background:var(--bg-color);
      color:var(--text-color); border-radius:999px; cursor:pointer; white-space:nowrap;
      transition:all .2s ease;
    }
    .gear-filter-tabs button.active{ background:var(--accent-color); color:#fff; border-color:var(--accent-color); }
    @media (max-width:768px){
      .gear-filter-tabs{ flex-wrap:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch; justify-content:flex-start; padding:0 12px; margin:0 -12px 24px; }
    }
    /* PCは2カラム */
    .gear-detail-grid{ display:grid; grid-template-columns:1fr; gap:40px; margin-top:24px; }
    @media (min-width:768px){ .gear-detail-grid{ grid-template-columns:repeat(2,1fr); gap:48px; } }
    /* 画像高さを揃える */
    .gear-detail-image{ height:260px; overflow:hidden; border-radius:12px; }
    .gear-detail-image img{ width:100%; height:100%; object-fit:cover; display:block; }
    @media (max-width:767px){ .gear-detail-image{ height:auto; } .gear-detail-image img{ height:auto; } }
  </style>
</head>

<body>
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">メインコンテンツにスキップ</a>

  <!-- Navigation -->
  <nav class="main-nav" id="main-nav">
    <div class="nav-container">
      <a href="/" class="nav-logo">Toji Masaya</a>
      <ul class="nav-menu" id="nav-menu">
        <li><a href="/" class="nav-link">Home</a></li>
        <li><a href="/gallery.html" class="nav-link">Gallery</a></li>
        <li><a href="/gear.html" class="nav-link active">Gear</a></li>
        <li><a href="/writings.html" class="nav-link">Writings</a></li>
      </ul>
      <button class="nav-toggle" id="nav-toggle" aria-label="メニューを開く">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="gear-hero" role="banner">
    <div class="gear-hero-image">
      <img src="assets/images/gear/m2.jpg" alt="Camera Equipment" loading="eager" width="1920" height="1080">
      <div class="gear-hero-overlay">
        <h1 class="gear-hero-title">Camera</h1>
        <p class="gear-hero-subtitle">ボディ／レンズ</p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main id="main-content" class="main-content">
    <div class="container">

      <!-- Introduction -->
      <section class="gear-intro">
        <p class="lead">撮影旅行に持っていきやすい機材群。LeicaとFujifilmを中心に運用しています。</p>
      </section>

      <!-- Filters -->
      <section aria-label="フィルタ">
        <div class="gear-filter-tabs" id="gear-filters">
          <button class="active" data-filter="all">All</button>
          <button data-filter="available">運用中</button>
          <button data-filter="considering">売却検討中</button>
          <button data-filter="sold">売却済</button>
        </div>
      </section>

      <!-- Gear Items -->
      <section class="gear-section">
        <div class="gear-detail-grid" id="camera-gear-grid">
          <div class="loading">機材を読み込み中...</div>
        </div>
      </section>

      <!-- Back to Gear -->
      <section class="back-to-home">
        <a href="/gear.html" class="back-link"><span class="back-arrow">←</span><span>Back to Gear</span></a>
      </section>

      <!-- Footer -->
      <footer class="footer" role="contentinfo">
        <div class="footer-content">
          <p>&copy; 2025 Toji Masaya. All rights reserved.</p>
          <p>Built with care in Japan</p>
        </div>
      </footer>

    </div>
  </main>

  <!-- Scripts -->
  <script>
    // Navigation
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    if (navToggle && navMenu) {
      navToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
        navToggle.classList.toggle('active');
        document.body.classList.toggle('nav-open');
      });
    }
    window.addEventListener('scroll', () => {
      const nav = document.getElementById('main-nav');
      if (window.scrollY > 50) nav.classList.add('scrolled'); else nav.classList.remove('scrolled');
    });

    // ===== Gear rendering + filtering =====
    let CAMERA_ITEMS = [];

    function getStatusText(status){
      // 表示ラベル：依頼どおりに更新
      const m = {
        'available': '運用中',
        'considering': '売却検討中',
        'sold': '売却済'
      };
      return m[status] || status;
    }
    function getLinkText(key){
      const m = { review:'レビュー記事', purchase:'購入リンク', official:'公式サイト' };
      return m[key] || key;
    }

    function renderCamera(items){
      const grid = document.getElementById('camera-gear-grid');
      if(!items || items.length === 0){
        grid.innerHTML = '<p class="loading">該当する機材がありません。</p>';
        return;
      }
      grid.innerHTML = items.map(item => `
        <article class="gear-detail-item">
          <div class="gear-detail-image">
            <img src="${item.image}" alt="${item.name}" loading="lazy">
          </div>
          <div class="gear-detail-info">
            <div class="gear-detail-header">
              ${item.status ? `<span class="gear-status-badge ${item.status}">${getStatusText(item.status)}</span>` : ''}
              <div class="gear-detail-brand">${item.brand ?? ''}</div>
              <h2 class="gear-detail-name">${item.name}</h2>
            </div>
            ${item.specs?.length ? `<div class="gear-detail-specs">${
              item.specs.map(s=>`<span class="gear-spec-tag">${s}</span>`).join('')
            }</div>`:''}
            ${item.description ? `<p class="gear-detail-description">${item.description}</p>`:''}
            ${item.comment ? `<div class="gear-detail-comment">${item.comment}</div>`:''}
            ${item.links && Object.keys(item.links).length ? `
              <div class="gear-detail-links">
                ${Object.entries(item.links).map(([k,u]) => `<a href="${u}" target="_blank" rel="noopener noreferrer">${getLinkText(k)}</a>`).join('')}
              </div>` : '' }
          </div>
        </article>
      `).join('');
    }

    function applyFilter(key){
      let shown = CAMERA_ITEMS;
      if(key && key !== 'all'){
        shown = CAMERA_ITEMS.filter(it => (it.status || '') === key);
      }
      renderCamera(shown);
    }

    function setupFilters(){
      const tabs = document.getElementById('gear-filters');
      if(!tabs) return;
      tabs.addEventListener('click', (e)=>{
        const btn = e.target.closest('button[data-filter]');
        if(!btn) return;
        tabs.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        applyFilter(btn.dataset.filter);
      });
    }

    async function loadCameraGear(){
      try{
        const res = await fetch('/data/gear.json');
        const data = await res.json();
        CAMERA_ITEMS = data?.categories?.camera?.items || [];
        setupFilters();
        applyFilter('all'); // 初期表示はAll
      }catch(err){
        console.error('機材データの読み込みエラー:', err);
        document.getElementById('camera-gear-grid').innerHTML =
          '<p class="loading">機材データの読み込みに失敗しました。</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadCameraGear);
  </script>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Camera Gear — Toji Masaya",
    "description": "田路昌也が使用しているカメラ機材",
    "author": { "@type": "Person", "name": "田路昌也", "alternateName": "Toji Masaya" },
    "url": "https://tojimasaya.com/gear-camera.html"
  }
  </script>
</body>
</html>
